try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0bbbeb33-9b98-46f4-a682-2e14cef6add4",e._sentryDebugIdIdentifier="sentry-dbid-0bbbeb33-9b98-46f4-a682-2e14cef6add4")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{5823:(e,t,n)=>{"use strict";n.d(t,{SharedScripts:()=>c});var a=n(95155),i=n(12115),o=n(51537),r=n(69173);let l=["https://use.typekit.net/jvr1gjm.css","https://use.typekit.net/tqv5rhd.css"];var s=n(70704);let d=e=>{let{isReturningVisitor:t}=e,{public:n}=(0,r.Z)();return(0,a.jsxs)(a.Fragment,{children:[l.map(e=>(0,a.jsx)("link",{rel:"stylesheet",type:"text/css",href:e},e)),(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:"window.publicInstanceSettings = ".concat((0,o.F)(n))}}),(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:"_embedStyles=function(name,priority,css) {\n    const styleNode = document.createElement(\"style\");\n    styleNode.append(document.createTextNode(css));\n    styleNode.setAttribute(\"data-name\", name);\n    styleNode.setAttribute(\"data-priority\", priority);\n\n    const startNode = document.getElementById('jss-insertion-start');\n    const endNode = document.getElementById('jss-insertion-end');\n  \n    if (!startNode || !endNode) {\n      throw new Error('Insertion point markers not found');\n    }\n  \n    styleNode.setAttribute('data-priority', priority.toString());\n    styleNode.setAttribute('data-name', name);\n    if (!window.serverInsertedStyleNodes) {\n      window.serverInsertedStyleNodes = [];\n    }\n    window.serverInsertedStyleNodes.push(styleNode);\n  \n    const styleNodes = Array.from(document.querySelectorAll('style[data-priority]'));\n    let left = 0;\n    let right = styleNodes.length - 1;\n  \n    while (left <= right) {\n      const mid = Math.floor((left + right) / 2);\n      const midNode = styleNodes[mid];\n      const midPriority = parseInt(midNode.getAttribute('data-priority') || '0', 10);\n      const midName = midNode.getAttribute('data-name') || '';\n    \n      if (midPriority < priority || (midPriority === priority && midName < name)) {\n        left = mid + 1;\n      } else if (midPriority > priority || (midPriority === priority && midName > name)) {\n        right = mid - 1;\n      } else {\n        // Equal priority and name, insert after this node\n        midNode.insertAdjacentElement('afterend', styleNode);\n        return;\n      }\n    }\n  \n    // If we didn't find an exact match, insert at the position determined by 'left'\n    if (left === styleNodes.length) {\n      // Insert before the end marker\n      endNode.insertAdjacentElement('beforebegin', styleNode);\n    } else if (left === 0) {\n      // Insert after the start marker\n      startNode.insertAdjacentElement('afterend', styleNode);\n    } else {\n      // Insert before the node at the 'left' index\n      styleNodes[left].insertAdjacentElement('beforebegin', styleNode);\n    }\n  }"}}),(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:"window.isReturningVisitor = ".concat((0,o.F)(t))}}),(0,a.jsx)("meta",{httpEquiv:"delegate-ch",content:"sec-ch-dpr https://res.cloudinary.com;"}),(0,a.jsx)("meta",{httpEquiv:"Accept-CH",content:"DPR, Viewport-Width, Width"}),(0,a.jsx)("script",{id:"jss-insertion-start"}),(0,a.jsx)("script",{id:"jss-insertion-end"}),(0,a.jsx)("link",{rel:"icon",href:s.KWo.get()})]})},c=e=>{let{isReturningVisitor:t}=e;return(0,i.useMemo)(()=>(0,a.jsx)(d,{isReturningVisitor:t}),[t])}},45005:(e,t,n)=>{"use strict";n.d(t,{O1:()=>o,V1:()=>l,k3:()=>r});var a=n(95155),i=n(12115);let o=i.createContext(null),r=()=>{let e=i.useContext(o);if(!e)throw"useLayoutOptions() used without the context available";return(0,i.useEffect)(()=>()=>{0===Object.keys(e.overridenLayoutOptions).length&&e.setOverridenLayoutOptions({})},[]),[e.overridenLayoutOptions,e.setOverridenLayoutOptions]},l=e=>{let{children:t}=e,[n,r]=(0,i.useState)({}),l=(0,i.useMemo)(()=>({overridenLayoutOptions:n,setOverridenLayoutOptions:r}),[n,r]);return(0,a.jsx)(o.Provider,{value:l,children:t})}},51537:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});let a=e=>JSON.stringify(e).replace(/<\//g,"<\\/")},70500:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var a=n(12115),i=n(48925);let o=e=>{var t;let{clientIdNewCookieExists:n,clientIdInvalidated:o}=e;return t=()=>{(0,i.S)((async()=>{if(n||o){let e=window.location.href,t=document.referrer;await fetch("/api/registerClientId",{method:"POST",body:JSON.stringify({landingPage:e,referrer:t})})}})())},(0,a.useEffect)(t,[]),null}},74248:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>j,rb:()=>S});var a=n(95155),i=n(12115),o=n(88262),r=n(82325),l=n(61927),s=n.n(l),d=n(94752),c=n.n(d),p=n(55643),u=n(88381),m=n(65180),g=n(97885),h=n(73987),f=n(84999),b=n(86677),y=n(35138),x=n.n(y);let v=(0,g.J)("\n  query multiLlmConversationLlmChatWrapperQuery($selector: LlmConversationSelector, $limit: Int, $enableTotal: Boolean) {\n    llmConversations(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...LlmConversationsFragment\n      }\n      totalCount\n    }\n  }\n"),k=(0,g.J)("\n  mutation updateLlmConversationLlmChatWrapper($selector: SelectorInput!, $data: UpdateLlmConversationDataInput!) {\n    updateLlmConversation(selector: $selector, data: $data) {\n      data {\n        ...LlmConversationsFragment\n      }\n    }\n  }\n"),w=(0,g.J)("\n  query LlmChatWrapper($documentId: String) {\n    llmConversation(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...LlmConversationsWithMessagesFragment\n      }\n    }\n  }\n"),C=i.createContext(null),S=()=>{let e=i.useContext(C);if(!e)throw Error("useLlmChat called but not a descendent of LlmChatWrapper");return e},j=(0,o.N)("LlmChatWrapper",e=>{var t,n;let{children:o}=e,l=(0,r.iZ)(),[d]=(0,u.n)(k),{data:g}=(0,m.IT)(v,{variables:{selector:{llmConversationsWithUser:{userId:null==l?void 0:l._id}},limit:50,enableTotal:!1},skip:!l||!(0,f.jC)(l),ssr:!1}),y=null==g||null==(t=g.llmConversations)?void 0:t.results,S=(0,i.useMemo)(()=>{let e=null==y?void 0:y.map(e=>({...e,messages:[]}));return c()(e,"_id")},[y]),[j,N]=(0,i.useState)([]),[I,T]=(0,i.useState)(S);(0,i.useEffect)(()=>{T(e=>x()(S,e)?e:S)},[S]);let _=(0,i.useMemo)(()=>{let e=I?Object.values(I):[];return s()(e,e=>{var t;return(0,h.p)(null!=(t=e.lastUpdatedAt)?t:e.createdAt)})},[I]),[L,E]=(0,i.useState)(),{data:A}=(0,m.IT)(w,{variables:{documentId:L},skip:!L||!(0,f.jC)(l),ssr:!1}),B=null==A||null==(n=A.llmConversation)?void 0:n.result,R=(0,i.useMemo)(()=>!!L&&j.includes(L),[L,j]),M=(0,i.useMemo)(()=>L?I[L]:void 0,[I,L]),z=(0,i.useCallback)((e,t)=>{N(n=>{let a,i=n.includes(e);return(t&&!i?a=[...n,e]:!t&&i&&(a=n.filter(t=>e!==t)),a)?a:n})},[]),F=(0,i.useCallback)(e=>{let{title:t,conversationId:n,createdAt:a,userId:i,channelId:o}=e;T(e=>{let{[o]:{messages:r},...l}=e;return{[n]:{_id:n,title:t,messages:r,createdAt:a,deleted:!1,lastUpdatedAt:a,userId:i},...l}}),E(n),z(n,!0)},[z]),D=(0,i.useCallback)(e=>{if(!l)return;let{conversationId:t,chunk:n}=e.data;T(e=>{let a,i=e[t],o=[...i.messages],r=o.slice(-1)[0],s=(null==r?void 0:r.role)==="assistant";if(s&&"buffer"in r){var d;a=(null!=(d=r.buffer)?d:"")+n}else a=n;let c=(0,b.Tj)().render(a,{docId:(0,p.zE)()}),u={conversationId:t,userId:l._id,role:"assistant",content:c,buffer:a};s&&o.pop(),o.push(u);let m={...i,deleted:!1};return m.messages=o,{...e,[m._id]:m}}),z(t,!1)},[l,z]),H=(0,i.useCallback)(e=>{if(!l)return;let{conversationId:t,content:n}=e.data;T(e=>{let a=e[t],i=[...a.messages],o=i.slice(-1)[0],r=(null==o?void 0:o.role)==="assistant",s={conversationId:t,userId:l._id,role:"assistant",content:n};r&&i.pop(),i.push(s);let d={...a};return d.messages=i,{...e,[d._id]:d}}),z(t,!1)},[l,z]),P=(0,i.useCallback)(e=>{if(!l)return;let{conversationId:t,error:n}=e.data;T(e=>{let a=e[t],i=[...a.messages];i.push({conversationId:t,userId:null==l?void 0:l._id,role:"error",content:n});let o={...a};return o.messages=i,{...e,[o._id]:o}}),z(t,!1)},[l,z]),W=(0,i.useCallback)(e=>{switch(e.eventType){case"llmCreateConversation":F(e);break;case"llmStreamContent":H(e);break;case"llmStreamChunk":D(e);break;case"llmStreamError":P(e);break;case"llmStreamEnd":z(e.data.conversationId,!1)}},[F,H,D,P,z]),q=(0,i.useCallback)(async e=>{var t,n;let{newMessage:a,promptContextOptions:i,newConversationChannelId:o}=e,r=await fetch("/api/sendLlmChat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newMessage:a,promptContextOptions:i,newConversationChannelId:o})});if(!r.ok){let e;try{e=await r.text()}catch(t){console.log(t),e="Unknown error when sending message."}P({eventType:"llmStreamError",data:{conversationId:null!=(t=a.conversationId)?t:o,error:e}});return}if(!r.body)return void P({eventType:"llmStreamError",data:{conversationId:null!=(n=a.conversationId)?n:o,error:"Missing response body for unknown reasons"}});let l=r.body.getReader(),s=new TextDecoder,d="";for(;;){let e,{done:t,value:n}=await l.read();if(t)break;for(d+=s.decode(n,{stream:!0});-1!==(e=d.indexOf("\n\n"));){let t=d.slice(0,e);if(d=d.slice(e+2),t.startsWith("data: ")){let e=null;try{e=JSON.parse(t.slice(6))}catch(e){console.error("Error parsing JSON:",e)}e&&W(e)}}}if(d.startsWith("data: ")){let e=null;try{e=JSON.parse(d.slice(6))}catch(e){console.error("Error parsing JSON:",e)}e&&W(e)}},[W,P]),G=(0,i.useCallback)(async e=>{var t;let{query:n,ragMode:a,currentPostId:i,postContext:o}=e;if(!l)return;let r=(0,p.zE)(),s=!!M,d={_id:r,userId:l._id,messages:[],createdAt:new Date().toISOString(),lastUpdatedAt:new Date().toISOString(),title:null,deleted:!1},c=s?M:d,u={conversationId:null==M?void 0:M._id,userId:l._id,content:n};T(e=>{var t;let n={...u,role:"user"},a=[...null!=(t=c.messages)?t:[],n],i={...c};return i.messages=a,{...e,[i._id]:i}}),z(c._id,!0),s||E(r),q({newMessage:{...u,conversationId:null!=(t=u.conversationId)?t:null},promptContextOptions:{postId:i,ragMode:a,includeComments:!0,postContext:o},...s?{}:{newConversationChannelId:r}})},[l,M,q,z]),O=(0,i.useCallback)(E,[E]),K=(0,i.useCallback)(async e=>{l&&(L===e&&E(void 0),T(t=>{let{[e]:n,...a}=t;return a}),d({variables:{selector:{_id:e},data:{deleted:!0}}}))},[l,L,d]);(0,i.useEffect)(()=>{B&&T(e=>{let t=e[B._id],n=B.messages;return(null==n?void 0:n.length)&&n.length>t.messages.length?{...e,[B._id]:{...B,messages:n}}:e})},[B]);let Y=(0,i.useMemo)(()=>({currentConversation:M,currentConversationLoading:R,orderedConversations:_,submitMessage:G,setCurrentConversation:O,archiveConversation:K}),[G,O,K,R,M,_]);return(0,a.jsx)(C.Provider,{value:Y,children:o})})},76776:(e,t,n)=>{"use strict";n.d(t,{default:()=>ni});var a=n(95155);(0,n(37921).NF)(window.publicSettings);var i=n(12115),o=n(97708),r=n(13118);let l=e=>{let t=i.useMemo(()=>e.cookies?e.cookies:new o.A(void 0),[e.cookies]);return(0,a.jsx)(r.Kq,{value:t,children:e.children})};var s=n(66250),d=n(45005),c=n(39999),p=n(13797),u=n(80052),m=n(50967),g=n(88262),h=n(42877),f=n(84300),b=n(22299),y=n.n(b),x=n(40329);let v=(0,x.Il)("MuiSnackbar",e=>({root:{zIndex:e.zIndexes.snackbar,position:"fixed",display:"flex",left:0,right:0,justifyContent:"center",alignItems:"center",bottom:0},snackbar:{transition:"transform .4s ease-in-out",bottom:0,[e.breakpoints.up("md")]:{left:"50%",right:"auto"}},enter:{transform:"translateY(0)",[e.breakpoints.up("md")]:{transform:"translateY(0)"}},exit:{transform:"translateY(50px)",[e.breakpoints.up("md")]:{transform:"translateY(50px)"}}})),k=e=>{let t=(0,x.IS)(v),{children:n,className:i,open:o}=e;return(0,a.jsx)("div",{className:t.root,children:(0,a.jsx)("div",{className:y()(t.snackbar,o?t.enter:t.exit,i),children:n})})};var w=n(86055),C=n(80458);let S=(0,x.Il)("FlashMessages",e=>({root:{},paper:{backgroundColor:e.palette.panelBackground.default,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 24px",[e.breakpoints.up("md")]:{minWidth:288,maxWidth:568,borderRadius:4},[e.breakpoints.down("sm")]:{flexGrow:1}},message:{padding:"8px 0",color:e.palette.text.maxIntensity,fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:24,marginRight:-8}})),j=i.createContext(null),N=e=>{let{children:t}=e,[n,o]=(0,i.useState)(()=>({messages:[],expiryTimer:null,animationState:"closed"})),r=(0,i.useCallback)(()=>{o(e=>(e.expiryTimer&&clearTimeout(e.expiryTimer),"closing"===e.animationState)?{messages:[],expiryTimer:null,animationState:"closed"}:{messages:e.messages,expiryTimer:setTimeout(r,500),animationState:"closing"})},[]),l=(0,i.useCallback)(e=>{o(t=>(t.expiryTimer&&clearTimeout(t.expiryTimer),{messages:[...t.messages,e],expiryTimer:setTimeout(r,6e3),animationState:"closed"===t.animationState?"opening":"open"}))},[r]),s=(0,i.useCallback)(()=>{o(e=>"opening"===e.animationState?{...e,animationState:"open"}:e)},[]),d=(0,i.useMemo)(()=>({flash:l,clear:r,tick:s}),[l,r,s]);return(0,a.jsx)(h.I.Provider,{value:d,children:(0,a.jsx)(j.Provider,{value:n,children:t})})},I=(0,g.N)("FlashMessages",()=>{let e=(0,i.useContext)(j),t=(0,i.useContext)(h.I);null==t||t.clear;let n=null==t?void 0:t.tick,o=(0,x.IS)(S);return((0,i.useEffect)(()=>{(null==e?void 0:e.animationState)==="opening"&&setTimeout(()=>null==n?void 0:n(),0)},[null==e?void 0:e.animationState,n]),e&&"closed"!==e.animationState)?(0,a.jsx)("div",{className:o.root,children:(0,a.jsx)(k,{open:"open"===e.animationState,children:(0,a.jsx)(w.t,{square:!0,elevation:6,className:o.paper,children:(0,a.jsx)(C.o,{variant:"body1",children:e.messages.map((e,t)=>{var n;return"string"==typeof e?e:(0,a.jsxs)("div",{children:[e.messageString,e.action&&(0,a.jsx)("div",{className:o.action,children:(0,a.jsx)(f.A,{onClick:e.action,children:null!=(n=e.actionName)?n:"UNDO"})})]},t)})})})})}):null});var T=n(82325),_=n(20063),L=n(9962),E=n(5501),A=n(36944),B=n(39584),R=n(70097),M=n(68225),z=n(11166),F=n(46107),D=n(70704),H=n(79711),P=n(48782),W=n(63670),q=n(19742),G=n(95178);let O=e=>!e.firstChild||e.firstChild.offsetParent===e,K=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?K="sticky":CSS.supports("position","-webkit-sticky")&&(K="-webkit-sticky"));let Y=!1;try{let e=Object.defineProperty({},"passive",{get(){Y={passive:!0}}}),t=()=>{};window.addEventListener("testPassive",t,e),window.removeEventListener("testPassive",t,e)}catch(e){}let J=e=>{let{el:t,onChange:n,unsubs:a,measure:i}=e;if(t===window){let e=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),t=i(e()),o=()=>{Object.assign(t,i(e())),n()};return window.addEventListener("resize",o,Y),a.push(()=>window.removeEventListener("resize",o)),t}{let e=i(t.getBoundingClientRect()),o=new ResizeObserver(()=>{Object.assign(e,i(t.getBoundingClientRect())),n()});return o.observe(t),a.push(()=>o.disconnect()),e}},$=function(){let{offsetTop:e=0,offsetBottom:t=0,bottom:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[a,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!a||!K)return;let i=[];return((e,t,n)=>{let{bottom:a,offsetBottom:i,offsetTop:o}=n,r=(e=>{let t=e;for(;t=t.parentElement;){let e=getComputedStyle(t,null).getPropertyValue("overflow-y");if(t===document.body)break;if("auto"===e||"scroll"===e||"overlay"===e)return t}return window})(e),l=!1,s=()=>{l||requestAnimationFrame(()=>{let e=p();e!==x&&v(e),l=!1}),l=!0},d=r===window?window.scrollY:r.scrollTop,c=e=>{let{offsetTop:t,height:n}=m,{naturalTop:a}=f,{height:o}=b;return e+t+n>=a+o+y+i},p=()=>{let{height:e}=m,{height:t}=b;return t+o+i<=e?3:c(d)?1:2},u=r!==window&&O(r),m=J({el:r,onChange:s,unsubs:t,measure:e=>{let{height:t,top:n}=e;return{height:t,offsetTop:u?n:0}}}),g=(e=>{let t=e.parentElement;for(;t&&"contents"===getComputedStyle(t,null).getPropertyValue("display");)t=t.parentElement;return t||window})(e),h=g===window?{top:0,bottom:0}:(e=>{let t=getComputedStyle(e,null);return{top:parseInt(t.getPropertyValue("padding-top"),10),bottom:parseInt(t.getPropertyValue("padding-bottom"),10)}})(g),f=J({el:g,onChange:s,unsubs:t,measure:e=>{let{height:t}=e;return{height:t-h.top-h.bottom,naturalTop:g===window?0:((e,t)=>{let n=e,a=0;O(t)||(a+=e.offsetTop-t.offsetTop,t=e.offsetParent,a+=-e.offsetTop);do a+=n.offsetTop,n=n.offsetParent;while(n&&n!==t);return a})(g,r)+h.top+m.offsetTop}}}),b=J({el:e,onChange:s,unsubs:t,measure:e=>{let{height:t}=e;return{height:t}}}),y=0,x=p(),v=t=>{let n=x;if(x=t,2===n&&(y=-1),3===t){e.style.position=K,a?e.style.bottom="".concat(i,"px"):e.style.top="".concat(o,"px");return}let{height:r,offsetTop:l}=m,{height:s,naturalTop:c}=f,{height:p}=b;if(2===t)if(e.style.position="relative",y=0===n?Math.max(0,l+d-c+o):Math.max(0,l+d+r-(c+p+i)),a){let t=Math.max(0,s-p-y);e.style.bottom="".concat(t,"px")}else e.style.top="".concat(y,"px");else e.style.position=K,1===t?a?e.style.bottom="".concat(i,"px"):e.style.top="".concat(r-p-i,"px"):a?e.style.bottom="".concat(r-p-i,"px"):e.style.top="".concat(o,"px")};v(x);let k=e=>{if(e===d)return;let t=e-d;if(d=e,3===x)return;let{offsetTop:n,height:a}=m,{naturalTop:r,height:l}=f,{height:s}=b;if(t>0)if(0===x){if(e+n+o>r){let t=Math.max(0,n+d-r+o);e+n+a<=r+s+t+i?v(2):v(1)}}else 2===x&&c(e)&&v(1);else if(1===x){if(n+e+a<r+l+i){let t=Math.max(0,n+d+a-(r+s+i));n+e+o>=r+t?v(2):v(0)}}else 2===x&&n+e+o<r+y&&v(0)},w=r===window?()=>k(window.scrollY):()=>k(r.scrollTop);r.addEventListener("scroll",w,Y),r.addEventListener("mousewheel",w,Y),t.push(()=>r.removeEventListener("scroll",w),()=>r.removeEventListener("mousewheel",w))})(a,i,{offsetBottom:t,offsetTop:e,bottom:n}),()=>{i.forEach(e=>e())}},[a,t,e,n]),o},X=e=>{let{offsetTop:t,offsetBottom:n,bottom:i,children:o,className:r,style:l}=e,s=$({offsetTop:t,offsetBottom:n,bottom:i});return(0,a.jsx)("div",{className:r,style:l,ref:s,children:o})};var U=n(52370),Z=n(19130),V=n(20799),Q=n(76130),ee=n(41831),et=n(84999),en=n(47650);function ea(e,t){return Math.random()*(t-e)+e}function ei(){let[e,t]=(0,i.useState)([]);return((0,i.useEffect)(()=>{var e;let n=document.createElement("style");n.textContent="\n      @keyframes fly-out {\n        0% {\n          transform: translate(0px, 0px) rotate(0deg) scale(1);\n          opacity: 1;\n        }\n        50% {\n          opacity: 1;\n        }\n        100% {\n          transform: var(--transform);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(n),e=()=>{let e=new WeakMap;function a(n){if(!e.has(n)){let a=e=>(function(e){if(!e.currentTarget)return;let n=e.clientX-30,a=e.clientY-25,i=Array.from({length:10}).map(()=>{let e=Math.random().toString(36).substring(2,11),t=ea(0,2*Math.PI),i=ea(120,270),o=n+i*Math.cos(t),r=a+i*Math.sin(t);return{id:e,startX:n,startY:a,endX:o,endY:r,rotate:ea(0,360),scale:ea(.5,1.2)}});t(e=>[...e,...i]),setTimeout(()=>{t(e=>e.filter(e=>!i.some(t=>t.id===e.id)))},1500)})(e);n.addEventListener("click",a,{passive:!0}),e.set(n,a)}}function i(t){let n=e.get(t);n&&(t.removeEventListener("click",n),e.delete(t))}function o(e){e.querySelectorAll("button").forEach(e=>a(e))}let r=new MutationObserver(e=>{for(let t of e)"childList"===t.type&&(t.addedNodes.forEach(e=>{e instanceof HTMLElement&&("button"===e.tagName.toLowerCase()&&a(e),o(e))}),t.removedNodes.forEach(e=>{e instanceof HTMLElement&&("button"===e.tagName.toLowerCase()&&i(e),e.querySelectorAll("button").forEach(e=>i(e)))}))});return r.observe(document.body,{childList:!0,subtree:!0}),o(document.body),()=>{r.disconnect(),document.querySelectorAll("button").forEach(e=>i(e)),n.remove()}},"function"==typeof window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,0)},[]),"undefined"==typeof document)?null:en.createPortal((0,a.jsx)(a.Fragment,{children:e.map(e=>{let t=e.endX-e.startX,n=e.endY-e.startY,i="translate(".concat(t,"px, ").concat(n,"px) rotate(").concat(e.rotate,"deg) scale(").concat(e.scale,")");return(0,a.jsx)("img",{src:D.SR4.get(),style:{position:"fixed",left:0,top:0,width:"60px",height:"60px",pointerEvents:"none",zIndex:9999,transform:"translate(0px, 0px)",animation:"fly-out 1.5s ease-out forwards","--transform":i,translate:"".concat(e.startX,"px ").concat(e.startY,"px")}},e.id)})}),document.body)}var eo=n(83542),er=n(21001),el=n.n(er);el()("2024-03-18"),el()("2024-03-29");var es=n(98892);let ed=(0,x.Il)("Slide",e=>({wrapper:{position:"relative"},slider:{transition:"left 0.3s ease-in-out",position:"relative"},slidOut:{left:"-100%"},slidIn:{left:0}})),ec=e=>{let{slidIn:t,children:n}=e,i=(0,x.IS)(ed);return(0,a.jsx)("div",{className:i.wrapper,children:(0,a.jsx)("div",{className:y()(i.slider,{[i.slidOut]:!t,[i.slidIn]:t}),children:n})})},ep=(0,g.N)("NavigationStandalone",e=>{let{sidebarHidden:t,unspacedGridLayout:n,noTopMargin:i,classes:o}=e,{location:r}=(0,E.zy)(),l=r.pathname===(0,es.Vb)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:y()({[o.sidebarWrapper]:U.kL}),children:(0,a.jsx)(ec,{slidIn:!t,children:(0,a.jsx)("div",{className:y()(o.sidebar,{[o.background]:l,[o.navSidebarTransparent]:n}),children:(0,a.jsx)(eo.A,{transparentBackground:n,noTopMargin:i})})})})})},{styles:e=>({sidebarWrapper:{minWidth:100,zIndex:e.zIndexes.footerNav,"@media print":{display:"none"},["@media(max-width: ".concat(1370,"px)")]:{minWidth:0},[e.breakpoints.down("md")]:{display:"none"}},sidebar:{width:eo.O,[e.breakpoints.down("md")]:{display:"none"},...e.isFriendlyUI&&{top:26}},navSidebarTransparent:{zIndex:10},background:{background:e.palette.panelBackground.translucent3}})});var eu=n(2979);let em=(0,g.N)("Footer",e=>{let{classes:t}=e;return(0,a.jsx)("div",{className:t.root})},{styles:e=>({root:{height:150,"@media print":{height:0}}})});var eg=n(11559),eh=n(32835);let ef=(0,g.N)("AnalyticsClient",()=>{let e=(0,T.iZ)(),[t]=(0,G.j)([eh.PD]),n=(0,i.useContext)(s.oe),o=null==e?void 0:e._id,r=t[eh.PD];return(0,i.useEffect)(()=>{A.$E.userId=o,A.$E.clientId=r,A.$E.tabId=window.tabId,(0,D.OPm)()||(A.$E.abTestGroupsUsed=n),(0,A.xJ)(!0)},[o,r,e,n]),(0,a.jsx)(a.Fragment,{})},{hocs:[eg.A]});var eb=n(26777),ey=n(31972),ex=n(55643);let ev="lwSessionTracker";var ek=n(76893),ew=n(97968);let eC=(0,g.N)("AnalyticsPageInitializer",()=>{!function(){let{captureEvent:e}=(0,A.z1)(),t=(0,i.useCallback)(()=>{e("beforeUnloadFired"),(0,A.xJ)(!0)},[e]);(0,eb.M)("beforeunload",t)}();let{pageIsVisible:e}=(0,ew.T)(),{userIsIdle:t}=(0,ek.a)(60),{setTimerIsActive:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[10,30],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,{captureEvent:n}=(0,A.z1)(),[a,o]=(0,i.useState)(0),[r,l]=(0,i.useState)(!0),[s,d]=e,c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(r){let e=a<t?s:d;c.current=setInterval(()=>{o(a+e),n("timerEvent",{seconds:a+e,increment:e})},1e3*e)}else r||0===a||clearInterval(c.current);return()=>clearInterval(c.current)},[r,l,a,n,s,d,t]),{seconds:a,isActive:r,setTimerIsActive:l,reset:function(){o(0),l(!1)}}}([10,30],60),{updateLastActivity:o}=function(){let{captureEvent:e}=(0,A.z1)(),t=(0,i.useCallback)(()=>{let t=(0,ey.PN)();if(!t)return{sessionId:(0,ex.zE)(),lastActivityTimestamp:Date.now()};let n=t.getItem(ev);if(n)try{let a=JSON.parse(n);if(Date.now()-a.lastActivityTimestamp<18e5)return a;let i={sessionId:(0,ex.zE)(),lastActivityTimestamp:Date.now()};return t.setItem(ev,JSON.stringify(i)),e("sessionStarted",{previousSessionId:a.sessionId,previousSessionLastActivity:a.lastActivityTimestamp}),i}catch(e){console.error("Failed to parse session data",e)}let a={sessionId:(0,ex.zE)(),lastActivityTimestamp:Date.now()};return t.setItem(ev,JSON.stringify(a)),e("sessionStarted"),a},[e]),n=(0,i.useCallback)(()=>{let e=(0,ey.PN)();if(!e)return;let t=e.getItem(ev);if(t)try{let n={...JSON.parse(t),lastActivityTimestamp:Date.now()};e.setItem(ev,JSON.stringify(n))}catch(e){console.error("Failed to update session data",e)}},[]);return(0,i.useEffect)(()=>{let e=t();A.$E.sessionId=e.sessionId;let n=()=>{let e=t();A.$E.sessionId=e.sessionId};document.addEventListener("visibilitychange",n);let a=e=>{if(e.key===ev&&e.newValue)try{let t=JSON.parse(e.newValue);A.$E.sessionId=t.sessionId}catch(e){console.error("Failed to parse session data from storage event",e)}};return window.addEventListener("storage",a),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("storage",a)}},[t]),{updateLastActivity:n}}(),r=(0,i.useRef)(t),l=(0,i.useRef)(e);return(0,i.useEffect)(()=>{r.current=t,l.current=e},[t,e]),(0,i.useEffect)(()=>{n(e&&!t)},[e,t,n]),(0,i.useEffect)(()=>{!t&&e&&o()},[t,e,o]),(0,i.useEffect)(()=>{let e=setInterval(()=>{!r.current&&l.current&&o()},12e4);return()=>clearInterval(e)},[o]),(0,a.jsx)(a.Fragment,{})});var eS=n(87732),ej=n(43575),eN=n(66283);let eI=(0,g.N)("AdminToggle",e=>{let{classes:t}=e,n=(0,T.iZ)(),{loading:i,toggleOn:o,toggleOff:r}=(0,eN.v)();return n?n.isAdmin?(0,a.jsxs)("div",{className:y()(t.toggle,{[t.toggleDisabled]:i}),onClick:i?void 0:r,children:[(0,a.jsx)("div",{className:t.onText,children:"Admin on"}),(0,a.jsx)("div",{className:t.toggleDot})]}):!n.isAdmin&&(0,P.fT)(n,"realAdmins")?(0,a.jsxs)("div",{className:y()(t.toggle,t.toggleOff,{[t.toggleDisabled]:i}),onClick:i?void 0:o,children:[(0,a.jsx)("div",{className:t.offText,children:"Admin off"}),(0,a.jsx)("div",{className:y()(t.toggleDot,t.toggleDotOff)})]}):null:null},{styles:e=>({toggle:{position:"fixed",left:20,bottom:20,display:"flex",alignItems:"center",height:36,width:118,backgroundColor:e.palette.buttons.alwaysPrimary,color:e.palette.text.alwaysWhite,fontSize:13,fontFamily:e.typography.fontFamily,fontWeight:600,padding:"0 18px",borderRadius:18,boxShadow:e.palette.boxShadow.eaCard,cursor:"pointer",zIndex:e.zIndexes.intercomButton,"&:hover":{backgroundColor:e.palette.primary.dark},[e.breakpoints.down("md")]:{left:10,bottom:58,height:26,width:92,fontSize:11,padding:"0 12px",borderRadius:13},[e.breakpoints.down("xs")]:{display:"none"},"@media print":{display:"none"}},toggleOff:{backgroundColor:e.palette.grey[400],"&:hover":{backgroundColor:e.palette.grey[500]}},toggleDisabled:{cursor:"default"},onText:{textAlign:"left"},offText:{flexGrow:1,textAlign:"right"},toggleDot:{position:"absolute",left:87,height:26,width:26,backgroundColor:e.palette.text.alwaysWhite,borderRadius:"50%",[e.breakpoints.down("md")]:{left:70,height:18,width:18}},toggleDotOff:{left:5,[e.breakpoints.down("md")]:{left:4}}})});var eT=n(80693),e_=n(16604);let eL=Symbol("processed");function eE(e){return function(e,t){let n,{inspect:a,collect:i,callback:o}=t,r=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:function(e){return a(e)?i(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT}}),l=[];for(;n=r.nextNode();)l.push(n);return l}(e,{inspect:e=>!["STYLE","SCRIPT"].includes(e.nodeName),collect:e=>e.nodeType===Node.TEXT_NODE})}function eA(e,t){var n;if(e[eL])return;let a=null!=(n=e.textContent)?n:"",i=!1;t.forEach(e=>{let[t,n]=e,o=t.split(/\s+/),r=n.split(/\s+/),l=o.map(e=>"(".concat(e,")")).join("\\s*"),s=RegExp("(".concat(l,")(\\s*)"),"gi");a=a.replace(s,function(e){for(var t,n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];i=!0;let l=a.slice(0,-3),s=null!=(t=a[a.length-3])?t:"",d=e.trim()!==e.replace(/\s+/g,"");return r.map((e,t)=>{var n,a;return a=null!=(n=l[t])?n:"",a===a.toUpperCase()?e.toUpperCase():a===a.toLowerCase()?e.toLowerCase():a[0]===a[0].toUpperCase()?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()}).join(d?" ":"")+s})}),i&&(e.textContent=a),e[eL]=!0}let eB=(0,g.N)("GlobalHotkeys",()=>{let e=(0,L.K1)(),t=(0,L.TT)(),n=(0,T.iZ)(),o=(0,e_.H)(),r=function(){let e=Object.entries(D.VU_.get()),t=(0,i.useRef)(null);return()=>{for(let t of eE(document.body))eA(t,e);t.current||(t.current=new MutationObserver(t=>{t.forEach(t=>{"childList"===t.type?t.addedNodes.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE)for(let n of eE(t))eA(n,e);else t.nodeType===Node.TEXT_NODE&&eA(t,e)}):"characterData"===t.type&&eA(t.target,e)})})),t.current.observe(document.body,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}}();return(0,eT.u)(a=>{if((0,et.jK)(n)&&a.altKey&&a.shiftKey&&!a.ctrlKey&&!a.metaKey&&68===a.keyCode){a.preventDefault();let n="dark"===e.name?"default":"dark";t({...e,name:n})}(0,P.iq)(n)&&a.altKey&&a.shiftKey&&!a.ctrlKey&&!a.metaKey&&83===a.keyCode&&(a.preventDefault(),o({hideSunshineSidebar:!(null==n?void 0:n.hideSunshineSidebar)})),(0,D.E9m)()&&(0,P.iq)(n)&&a.altKey&&a.shiftKey&&!a.ctrlKey&&!a.metaKey&&85===a.keyCode&&r()}),(0,eT.X)(()=>{let e=document.getElementsByTagName("details");for(let t=0;t<e.length;t++){let n=e.item(t);n&&!n.getAttribute("open")&&n.setAttribute("open","true")}}),(0,a.jsx)(a.Fragment,{})});var eR=n(74248),eM=n(83252),ez=n(66121),eF=n(88381),eD=n(65180),eH=n(95078),eP=n(72861),eW=n(63591),eq=n(72561),eG=n(97885);let eO=(0,eG.J)("\n  query multiReviewVoteReviewVotingCanvasQuery($selector: ReviewVoteSelector, $limit: Int, $enableTotal: Boolean) {\n    reviewVotes(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...reviewVoteFragment\n      }\n      totalCount\n    }\n  }\n"),eK=e=>"tagName"in e&&("DIV"===e.tagName||"HEADER"===e.tagName),eY=e=>{let{heart:{userId:t,displayName:n,x:o,y:r,theta:l},currentUser:s,removeHeart:d,classes:c,disabled:p}=e,u=t===(null==s?void 0:s._id),m=u?"You voted! (Click to remove icon)":"".concat(n," voted!"),g=(0,i.useCallback)(()=>{u&&d()},[u,d]);return(0,a.jsx)("div",{style:{left:"".concat(100*o,"%"),top:"".concat(100*r,"%"),transform:"rotate(".concat(l,"deg)")},className:y()(c.gsHeart,{[c.gsHeartCursor]:!n,[c.gsDisabledHeart]:p}),children:(0,a.jsxs)(eW.default,{title:m,placement:"bottom",popperClassName:c.gsHeartTooltip,children:[(0,a.jsx)(eq.A,{icon:"VoteBallot",onClick:g}),p&&(0,a.jsxs)("div",{className:c.gsDisabledHeartTooltip,children:[!s&&"Log in to vote in the review (with an account created before 2022)",s&&!(0,eM.c8)(s)&&"You need to have joined before 2022 to vote in the review",s&&(0,eM.c8)(s)&&"Vote on at least 6 posts in the review to leave your icon"]})]})})};(0,g.N)("ReviewVotingCanvas",e=>{var t,n;let{classes:o}=e,{pathname:r}=(0,E.zy)(),l=(0,T.iZ)(),{data:s,refetch:d}=(0,eD.IT)((0,eG.J)("\n    query GivingSeasonHeartsQuery($electionName: String!) {\n      GivingSeasonHearts(electionName: $electionName) {\n        userId\n        displayName\n        x\n        y\n        theta\n      }\n    }\n  "),{variables:{electionName:eM.$h},skip:"/"!==r}),[c,p]=(0,i.useState)(null!=(n=null==s?void 0:s.GivingSeasonHearts)?n:[]);(0,i.useEffect)(()=>{var e;p(null!=(e=null==s?void 0:s.GivingSeasonHearts)?e:[])},[null==s?void 0:s.GivingSeasonHearts]);let[u,{loading:m}]=(0,eF.n)((0,eG.J)("\n      mutation AddGivingSeasonHeart(\n        $electionName: String!,\n        $x: Float!,\n        $y: Float!,\n        $theta: Float!\n      ) {\n        AddGivingSeasonHeart(\n          electionName: $electionName,\n          x: $x,\n          y: $y,\n          theta: $theta\n        ) {\n          userId\n          displayName\n          x\n          y\n          theta\n        }\n      }\n    "),{errorPolicy:"all"}),[g,{loading:f}]=(0,eF.n)((0,eG.J)("\n      mutation RemoveGivingSeasonHeart($electionName: String!) {\n        RemoveGivingSeasonHeart(electionName: $electionName) {\n          userId\n          displayName\n          x\n          y\n          theta\n        }\n      }\n    "),{errorPolicy:"all"}),b=(0,i.useRef)(null),x=(0,i.useCallback)((e,t)=>{if(b.current){let n=b.current.getBoundingClientRect();if(e>n.left&&e<n.right&&t>n.top&&t<n.bottom)return{x:(e-n.left)/n.width,y:(t-n.top)/n.height}}return null},[b]),v=(0,i.useCallback)(async(e,t,n)=>{let a=await u({variables:{electionName:eM.$h,x:e,y:t,theta:n}});return d(),a},[u,d]),k=(0,i.useCallback)(async()=>{var e;let t=null==(e=(await g({variables:{electionName:eM.$h}})).data)?void 0:e.RemoveGivingSeasonHeart;Array.isArray(t)&&p(t),await d()},[g,d]),w=!m,[C,S]=(0,i.useState)(null),j=(0,i.useCallback)(e=>{let{target:t,clientX:n,clientY:a}=e;eK(t)?S(x(n,a)):S(null)},[x]),N=(0,i.useCallback)(()=>{S(null)},[]),{data:I}=(0,eD.IT)(eO,{variables:{selector:{reviewVotesFromUser:{userId:null==l?void 0:l._id,year:eM.PI.toString()}},limit:eP.E,enableTotal:!0},skip:!l,notifyOnNetworkStatusChange:!0}),_=null==I||null==(t=I.reviewVotes)?void 0:t.totalCount,{flash:L}=(0,h.o)(),B=(_||0)>=eP.E,R=(0,i.useCallback)(async e=>{let{target:t,clientX:n,clientY:a}=e;if(eK(t)){let e=x(n,a);if(e){var i;if(!B)return L("You need to have voted on at least six posts to place your ballot icon.");let t=Math.round(25*Math.random()*2-25),n=null==(i=(await v(e.x,e.y,t)).data)?void 0:i.AddGivingSeasonHeart;Array.isArray(n)&&p(n),S(null)}}},[x,v,L,B]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eH.A,{className:o.backgroundImage,publicId:"uncleOli_inoyl6",darkPublicId:"uncleOli_darkmoe_ixccjs"}),(0,a.jsx)("h3",{className:o.callToAction,children:"LESSWRONG needs YOU to VOTE"}),(0,a.jsx)(A.Ig,{pageSectionContext:"header",siteEvent:eM.$h,children:(0,a.jsx)("div",{...w?{onMouseMove:j,onMouseOut:N,onClick:R}:{},ref:b,className:y()(o.rootGivingSeason,{[o.gsCanPlaceHeart]:C,[o.gsLoadingHeart]:m||f}),children:(0,a.jsx)("div",{className:o.gsHearts,children:(0,a.jsxs)(ee.A,{ssr:!1,children:[c.map(e=>(0,a.jsx)(eY,{heart:e,currentUser:l,removeHeart:k,classes:o},e.userId)),C&&(0,a.jsx)(eY,{heart:{displayName:"",userId:"",theta:0,...C},currentUser:l,removeHeart:k,classes:o,disabled:!B})]})})})})]})},{styles:e=>({backgroundImage:{position:"absolute",width:"57vw",maxWidth:"1000px",top:-70,right:"-334px","-webkit-mask-image":"radial-gradient(ellipse at center top, ".concat(e.palette.text.alwaysBlack," 55%, transparent 70%)"),height:"auto",marginLeft:"-22px"},rootGivingSeason:{opacity:0,transition:"opacity 0.25s ease",zIndex:1,position:"relative","&:hover":{opacity:1}},rootScrolled:{},leftHeaderItems:{display:"flex",alignItems:"center"},toolbarGivingSeason:{justifyContent:"space-between"},activeStepLink:{textUnderlineOffset:"6px",textDecoration:"underline","&:hover":{textDecoration:"underline"}},disabledStepLink:{opacity:.7},gsRightHeaderItems:{position:"absolute",right:0,top:8,zIndex:4,[e.breakpoints.down("xs")]:{top:4}},gsContent:{marginTop:-20,fontFamily:e.palette.fonts.sansSerifStack,fontSize:30,fontWeight:700,lineHeight:"120%",letterSpacing:"-0.76px",display:"flex",flexDirection:"column",justifyContent:"center",gap:"6px",height:"100%",[e.breakpoints.down("sm")]:{display:"none"}},gsContentTitle:{"& a":{textDecoration:"underline","&:hover":{textDecoration:"none",opacity:1}}},gsContentSubtitle:{marginTop:-5,fontSize:18,fontWeight:500},gsButtons:{display:"flex",gap:"10px",zIndex:4,marginTop:6,"& .EAButton-variantContained":{background:e.palette.text.alwaysWhite,fontWeight:600,height:36}},gsButtonIcon:{marginRight:4,marginLeft:-4,width:20,height:20},gsHearts:{position:"relative",height:"100vh",width:"calc(100vw - 1100px)",zIndex:1,[e.breakpoints.down("sm")]:{display:"none"}},gsHeart:{position:"absolute",zIndex:3,color:e.palette.text.reviewBallotIcon,marginLeft:-12,marginTop:-12},gsHeartTooltip:{backgroundColor:"".concat(e.palette.panelBackground.tooltipBackground2," !important")},gsCanPlaceHeart:{cursor:"none !important"},gsHeartCursor:{pointerEvents:"none",color:e.palette.text.reviewBallotIcon},gsDisabledHeart:{color:e.palette.greyAlpha(.25)},gsDisabledHeartTooltip:{fontFamily:e.palette.fonts.sansSerifStack,position:"absolute",width:"150px",textAlign:"center",left:"50%",right:"50%",bottom:"calc(-100% - 15px)",transform:"translateX(-50%)"},gsLoadingHeart:{cursor:"wait !important"},callToAction:{...e.typography.headerStyle,fontWeight:700,textAlign:"center",fontSize:30,width:300,color:e.palette.greyAlpha(.7),zIndex:e.zIndexes.reviewVotingCanvas,position:"absolute",top:270,right:300,[e.breakpoints.down(1800)]:{right:260},[e.breakpoints.down(1700)]:{right:220,fontSize:28},[e.breakpoints.down(1600)]:{right:200,width:250},[e.breakpoints.down(1550)]:{right:200,width:240,top:225},[e.breakpoints.down(1520)]:{right:"unset",left:10,width:175,top:225},[e.breakpoints.down(1475)]:{left:10,top:625,width:250,fontSize:26},[e.breakpoints.down(1350)]:{fontSize:26,right:"unset",left:-40,width:225,top:625}}})});var eJ=n(97067),e$=n(19518),eX=n(25675),eU=n(51897),eZ=n(3282),eV=n(34297),eQ=n(28203);let e0=[{_id:"bjWcYLHAd6ygtjxFu",lat:9.0690546,lng:7.4784446},{_id:"ddJqT9EGTyRLnDnr9",lat:-33.92817,lng:18.42267},{_id:"diMyfEtEMj5Y4QBQa",lat:.279938,lng:32.820062},{_id:"2mD4LrLpCmtBTFcjm",lat:-35.2729725,lng:149.1324762},{_id:"3NkCrLCQrJzdHMZNo",lat:-28.1421292,lng:153.4954627},{_id:"Ybtvo2b4MPJDnamKy",lat:-37.8047158,lng:144.9630204},{_id:"xZQCD3Ro7KNFG939P",lat:-33.87675979999999,lng:151.2058953},{_id:"HtSnjqgPR5g7Cdzta",lat:22.2811864,lng:114.1578201},{_id:"woeNyyA2MwCocQtff",lat:12.9742758,lng:77.60702409999999},{_id:"Yj9MHguuKHaznp4bo",lat:19.1265134,lng:72.8204695},{_id:"bc73wm65vCwGk5kzG",lat:-6.2362408,lng:106.7932795},{_id:"AbCq4nMfBMymECvGZ",lat:33.3259368,lng:44.4600348},{_id:"5KzapBcA3AffA8H3o",lat:32.0716535,lng:34.7868695},{_id:"eKzfkv4CkLEKLJ8aa",lat:35.6444362,lng:139.7011943},{_id:"vKYS674jtqMnDtA52",lat:3.114569,lng:101.6403718},{_id:"Ti3dRmcnsGvqEb2ki",lat:-36.8211175,lng:174.7250069},{_id:"FqwHAXu6uGvq7gFfX",lat:-43.5298694,lng:172.6225197},{_id:"FcXdJDsaifbWqYeZa",lat:-41.2788499,lng:174.7791569},{_id:"E6wLzn7ws2B4DR5uC",lat:1.3142203,lng:103.8099293},{_id:"ZuWboG5vPDrKDYHwc",lat:39.89721,lng:32.8632769},{_id:"vGqjCQdCeaHzpBKqD",lat:25.2345391,lng:55.2938963},{_id:"iGLqDZwtGPycHfgAf",lat:10.8106943,lng:106.7174933},{_id:"FMNAWzkNzyNzytzh3",lat:42.7094896,lng:23.3670996},{_id:"XoHoZzBnSJu6BxNes",lat:49.1945896,lng:16.6066598},{_id:"a7gFfo95rYHfcjKwT",lat:55.6538445,lng:12.566032},{_id:"Ei3MKRfdH4eXnPjnD",lat:55.6538445,lng:12.566032},{_id:"jyamrDTKYokYtkoAj",lat:60.1693776,lng:24.9403506},{_id:"h3SLQfvDsBwSjQK7t",lat:48.8236707,lng:2.3363838},{_id:"i578yN2oziDkcgnkp",lat:44.8089756,lng:-.5898561},{_id:"Q2diMGMYxrv7fA3fi",lat:43.5863774,lng:1.4468235},{_id:"4mx9utNvcvvmWnWzK",lat:52.545187,lng:13.385562},{_id:"pPhYytj5BzognTn79",lat:53.0734443,lng:8.8243865},{_id:"4EBpKSZnwEmpdm7h9",lat:50.9334458,lng:6.8481128},{_id:"6JSpaCFpz3W4Mfko2",lat:49.8707825,lng:8.6512084},{_id:"9gKjefGAHZcCzieRW",lat:47.9894392,lng:7.839461999999999},{_id:"qymNcigbQqkC5jGEb",lat:53.5606862,lng:9.9833765},{_id:"36nnz55vYcdccopGa",lat:51.3362799,lng:12.4028547},{_id:"auoeyCjkcGmhi8dkf",lat:49.4804532,lng:8.471360599999999},{_id:"5Fmvu6hpRCfmb9yvW",lat:48.1490198,lng:11.5562246},{_id:"EfPfgZe2PocqvXBLq",lat:37.9398398,lng:23.6923394},{_id:"hbodWP3zp4quMo8eT",lat:47.4922565,lng:19.0631741},{_id:"JqAFEvW33Fqk9JZii",lat:42.9512788,lng:12.7005802},{_id:"ctykSscfNEioydydM",lat:45.470932,lng:9.2060356},{_id:"dyviNnc4M3bxr3cvg",lat:43.7178148,lng:10.4031703},{_id:"h9dJuND7NiPFbwKK9",lat:41.88578400000001,lng:12.5687},{_id:"A2yrqbQ2hgQX4r9JQ",lat:46.06753399999999,lng:13.235647},{_id:"ceuqCbjMxHgzRkrjd",lat:56.9417918,lng:24.1211974},{_id:"tiCamcCgasPFSszu4",lat:54.68757309999999,lng:25.2805674},{_id:"kGqRAiWtDfeGkrNyB",lat:52.3864241,lng:4.8839647},{_id:"mbemRemwuuMAsCYmA",lat:59.9294393,lng:10.7143497},{_id:"fXdbNHrRncg2r84uF",lat:38.7326073,lng:-9.154358799999999},{_id:"a7vdyJfATFR4XfT7K",lat:55.788363,lng:37.6787319},{_id:"qxfYxHAN3GdBs8B8m",lat:44.8125987,lng:20.4755205},{_id:"Aqf3kpFMw9CZKEae4",lat:46.0530857,lng:14.4996582},{_id:"rTmq5dsp2ES55Aftu",lat:41.3885777,lng:2.1850886},{_id:"kE2TwzB6cC8xgWLMg",lat:40.4187901,lng:-3.6866418},{_id:"THeTqwyTKKreKBEiu",lat:57.70529819999999,lng:11.9711591},{_id:"dF3Mxtpz8D7vZNtvw",lat:59.3310944,lng:18.0595668},{_id:"6gb9HkDiSwXfSaCqk",lat:46.9500259,lng:7.4386814},{_id:"PKQCg2QJjXqBGxf3c",lat:46.2268462,lng:6.0804159},{_id:"dXDCTpozyrmfHWLqk",lat:47.3545374,lng:8.5519549},{_id:"8fbgAaHbFisFDFm6B",lat:51.4570984,lng:-2.5908125},{_id:"kgFQNDm7SwW5bct7j",lat:52.2040589,lng:.118463},{_id:"qH9qScj5SttZdcKDg",lat:51.4830073,lng:-3.1748035},{_id:"jQRp4ggbhuMbhDJuB",lat:55.9478129,lng:-3.1815763},{_id:"T99XpyuwaaNqPg3fB",lat:53.40192829999999,lng:-2.9803989},{_id:"4sgxDgBg6B3RrPogg",lat:51.5251929,lng:-.0713327},{_id:"Fyr5BGq7kB3dknTYL",lat:53.4776933,lng:-2.2526688},{_id:"Mnu5aRkj2vbcAidT7",lat:54.9690679,lng:-1.6172061},{_id:"eEPPThTmoQhQmSeqY",lat:51.7494513,lng:-1.2382764},{_id:"T7DErsiNqopZFkWi5",lat:53.38005219999999,lng:-1.4733416},{_id:"gt58F2FCWeTFhrKjp",lat:51.0430983,lng:-114.0799659},{_id:"LyGyTA3NEjzo3AJ7W",lat:53.5415135,lng:-113.490647},{_id:"LvdJedGuTXRnnCZLf",lat:44.6509127,lng:-63.5815233},{_id:"MQFjkagkWbZG4qLTR",lat:43.4527631,lng:-80.4863763},{_id:"5pxmhfQ2qCSfxFsov",lat:43.54368789999999,lng:-79.70048349999999},{_id:"ngpZH9gA76CyHhrER",lat:45.5177162,lng:-73.58697459999999},{_id:"hjaWfJpbhyb8cyDZ6",lat:45.4012487,lng:-75.72547949999999},{_id:"92XuTcZPPeK2FtpPH",lat:45.3072983,lng:-66.016363},{_id:"iDdcxK8BLMrY7bQ36",lat:43.6598343,lng:-79.3881786},{_id:"acGsM6peFiYEFvdff",lat:19.4133877,lng:-99.1719176},{_id:"CyDMprs6XwkQeb3qf",lat:20.6352014,lng:-87.06897099999999},{_id:"b4Brc7RPBz2dKrqeE",lat:61.1844984,lng:-149.9262106},{_id:"Xq7TgQJahy6hJY48d",lat:42.2717803,lng:-83.7305744},{_id:"qcReFwm36ueYuShJe",lat:35.480104,lng:-82.53918139999999},{_id:"EEgyFex3bYbua7Bsn",lat:33.8021964,lng:-84.4266667},{_id:"Wsb3FAgwJeJjKS3ia",lat:30.3059651,lng:-97.7376388},{_id:"55fS4xcKCtve6ZAGQ",lat:39.2552611,lng:-76.7154223},{_id:"whs4dNKmpxg7vMccA",lat:48.7573173,lng:-122.4904924},{_id:"Fqshn6vr6AFBTxKDY",lat:37.8599417,lng:-122.2595841},{_id:"F8dt52bjrm8oHRxvT",lat:42.3706642,lng:-71.1231275},{_id:"oC4DJsGTcxMBRE8Ej",lat:40.0190763,lng:-105.1404855},{_id:"nkjHrKLdMgvtmM9DL",lat:44.4559498,lng:-73.2262447},{_id:"BrGmbH3McfBoXcfDC",lat:39.3999597,lng:-107.2134251},{_id:"6RaozuExMdJBbmhwb",lat:43.3823316,lng:-72.60789650000001},{_id:"aTZjzPuBorDsHh6Cw",lat:38.3516847,lng:-81.6350894},{_id:"2r7a5zuYggDLbAEaG",lat:35.2406127,lng:-80.8131453},{_id:"CGrtjD4K74njfx93u",lat:38.035277,lng:-78.500725},{_id:"f7RKAAcDgNNmoLw7j",lat:41.873835,lng:-87.62252900000001},{_id:"es7imJsasstguyp29",lat:39.1319106,lng:-84.4626694},{_id:"82qkAcALwxS7RtAWC",lat:41.4860542,lng:-81.7045576},{_id:"hezmhsbLN3BfjFw8H",lat:38.9859704,lng:-76.9450882},{_id:"QPjRFzWq8KJfLKyhh",lat:30.6229727,lng:-96.3282983},{_id:"KiumNi8opCqGHaxSK",lat:39.97195139999999,lng:-82.9463167},{_id:"qfNcTromGTcAQg4Df",lat:44.559656,lng:-123.263016},{_id:"fbLhYJxKxDhEqC6Yu",lat:32.9073768,lng:-96.8032027},{_id:"Rw8JxdNAKtnsDr4nT",lat:38.5421935,lng:-121.7410058},{_id:"KrTGdKv9LYLhMqACT",lat:39.752063,lng:-105.048312},{_id:"ii6o786sfLp7kvPhP",lat:35.9894268,lng:-78.894975},{_id:"EzQTT97KenkFkPZJa",lat:32.7788752,lng:-115.5638572},{_id:"xNjjhonBshXJEk6QP",lat:44.0536353,lng:-123.1044572},{_id:"aCqgnjNA2fJSsmsbm",lat:36.07344399999999,lng:-94.16085220000001},{_id:"6DR5bCivG4JmRZxvD",lat:26.1003738,lng:-80.13756029999999},{_id:"FBarjo2wnJxDjj89x",lat:39.1549391,lng:-120.9904776},{_id:"jNLNeoMF4xkgTruGC",lat:30.4133923,lng:-87.2139444},{_id:"notXg8sbX38cBdQtz",lat:40.2707075,lng:-76.88753059999999},{_id:"RytzZxwAMNFhEa9Pg",lat:41.7660919,lng:-72.71002659999999},{_id:"tsgZ6MwiaFBveewPu",lat:29.744523,lng:-95.33945589999999},{_id:"nqs5tPkzyK3cwjm8v",lat:34.7153078,lng:-86.67279479999999},{_id:"rQ9kNApLeaFmqdXiH",lat:42.2509017,lng:-84.4218827},{_id:"3rC8nyWBmjJg2dAtS",lat:42.6698913,lng:-78.4145704},{_id:"zYFRqLFcvp88ohMYu",lat:39.1085972,lng:-94.582715},{_id:"QvvYp7HKrYGCqDyQz",lat:43.8125715,lng:-91.25425949999999},{_id:"DBi9uXPnipzex5Wt4",lat:36.1468685,lng:-115.3009448},{_id:"brgys6w63Fn2rxrWg",lat:41.7418454,lng:-111.8221997},{_id:"AnjJzZ5ZWxsHWxCYa",lat:33.9963629,lng:-118.4156507},{_id:"tvRsR5jTtbAi7TYya",lat:33.5190924,lng:-101.946802},{_id:"QQkXsHoLF2n9NBzSb",lat:43.023602,lng:-89.48453599999999},{_id:"SomE2xtvaewnAqG53",lat:40.712063,lng:-74.016188},{_id:"JWhY5HFetFzuiRZi4",lat:40.6552005,lng:-73.4751276},{_id:"S4zTkEBBTNQEWyiLp",lat:35.152023,lng:-90.01346840000001},{_id:"Wy3oLa4krFrtCDq5u",lat:25.7953818,lng:-80.1867092},{_id:"g7rjJtMEDbpYkLvCE",lat:44.9343436,lng:-93.23912639999999},{_id:"hqJ6ZphFBmGGomFap",lat:29.9413428,lng:-90.10239229999999},{_id:"gECWBdvuv8uwovRi6",lat:33.6144695,lng:-117.8591423},{_id:"fMcxBfAimukmqpAzB",lat:42.3306961,lng:-71.19443509999999},{_id:"6cHzfy3TpSAxXTrwy",lat:36.8674841,lng:-76.29861559999999},{_id:"Zxd2Sa4HaeESZWHXD",lat:42.3181269,lng:-72.6333128},{_id:"n95A9tZDb7amQxy2Z",lat:39.9486559,lng:-75.1730745},{_id:"Q6DSBkmhJZbq7HijD",lat:33.4756895,lng:-112.0903687},{_id:"vPeAKEk7XtqF4FbKR",lat:40.4517396,lng:-79.9194888},{_id:"wxzKYnKMwekxxKoSW",lat:45.5341187,lng:-122.6502648},{_id:"4cgTSvHh7P4tN8Hbf",lat:40.3499808,lng:-74.6615657},{_id:"MgMHBBpQjLpvFx64f",lat:47.6610719,lng:-122.0920527},{_id:"DtreuTDZcDqYAs4pB",lat:37.5581958,lng:-77.4612166},{_id:"DtvBmtWcHGtjPbrHu",lat:43.1563944,lng:-77.5990453},{_id:"vdQ3YzFiqtLgjgoNJ",lat:38.5616673,lng:-121.4825211},{_id:"YTNbBxTHpLG5ME27x",lat:40.7467891,lng:-111.8763126},{_id:"uuY9MiMHLn23sBoRW",lat:29.4362652,lng:-98.4808205},{_id:"9MA8iXvL3RDeP7wko",lat:32.7392362,lng:-117.133824},{_id:"TCTYL3W3pgsrsjq3P",lat:37.7644832,lng:-122.4378848},{_id:"xCaRLB7cECvtKatfL",lat:47.6303606,lng:-122.3172323},{_id:"cesjnYvEYdtTyK7XL",lat:43.5323702,lng:-96.7220767},{_id:"ouEGPP5exKhWGKM4H",lat:41.6752496,lng:-86.2501185},{_id:"Lv6E4zdZGi5x3oKC4",lat:38.6049978,lng:-90.2489106},{_id:"W2WES4JGEpT8t9etL",lat:45.8454031,lng:-91.53859849999999},{_id:"8v8KcRGRBesXaXeox",lat:37.36883,lng:-122.0363496},{_id:"JuxkmLwNcDv5kzhTz",lat:36.40797990000001,lng:-105.5711155},{_id:"8LABLkzsqHdbfynRh",lat:41.6675635,lng:-83.6729688},{_id:"pBjLgfenoDoE46xq2",lat:32.2245583,lng:-110.9652399},{_id:"StBQkMYtQoGhQhake",lat:33.2104796,lng:-87.5526261},{_id:"s3FRraF568n8FuE7u",lat:40.113856,lng:-88.22424199999999},{_id:"ixLA7FCypwvrtCrGn",lat:38.9028167,lng:-77.04586789999999},{_id:"uqoM6n5nhy9yJpQK9",lat:40.4256187,lng:-86.9251065},{_id:"zSnzsZWYYGpdRySTu",lat:26.6988881,lng:-80.0635902},{_id:"YjczugErJ5zyK2dKD",lat:32.9930285,lng:-97.1902291},{_id:"qLZifrZWhGwStKnSd",lat:-34.5963387,lng:-58.4198371},{_id:"c4vfYNusrtcS4CtF6",lat:-22.9510351,lng:-43.1842273},{_id:"NuQHcXx27DSEdbBeq",lat:-34.9146374,lng:-54.86168199999999}];var e1=n(213),e9=n(64504),e2=n(53109),e3=n(78476),e4=n(64579),e5=n(33805),e7=n(55471);let e8=(0,g.N)("HomepageMapFilter",e=>{let{classes:t}=e,{openDialog:n}=(0,R.sp)(),i=(0,T.iZ)(),{flash:o}=(0,h.o)(),r=(0,e_.H)(),{captureEvent:l}=(0,A.z1)(),[s,d,c]=(0,G.j)([eh.ZB]);return(0,a.jsxs)(w.t,{children:[(0,a.jsx)(eW.default,{title:"September is Meetups Month, celebrating Astral Codex Everywhere. Find a meetup near you.",placement:"left",children:(0,a.jsx)("div",{className:y()(t.section,t.title),children:(0,a.jsx)(ez.Link,{to:"/posts/ynpC7oXhXxGPNuCgH/acx-meetups-everywhere-2023-times-and-places",children:"Meetups Month"})})}),(0,a.jsx)(e7.A,{}),(0,a.jsx)(eW.default,{title:"Get notified when events are in your area",placement:"left",children:(0,a.jsxs)("div",{className:y()(t.section,t.subscribeSection),onClick:(0,e4.P)(n,"EventNotificationsDialog",e=>{let{onClose:t}=e;return(0,a.jsx)(e5.A,{onClose:t})},i),children:[(0,a.jsx)(e3.A,{className:y()(t.actionIcon,t.subscribeIcon)}),(0,a.jsx)("span",{className:t.buttonText,children:" Subscribe to events"})]})}),(0,a.jsx)(eW.default,{title:"Hide the map from the frontpage",placement:"left",inlineBlock:!1,children:(0,a.jsx)("div",{className:y()(t.section,t.hideSection),onClick:()=>{let e;l("".concat(eh.ZB,"Clicked")),i?(r({hideFrontpageMap:!0}),e=()=>{r({hideFrontpageMap:!1})}):(d(eh.ZB,"true",{expires:el()().add(30,"days").toDate(),path:"/"}),e=()=>{c(eh.ZB,{path:"/"})}),o({messageString:"Hid map from Frontpage",action:e})},children:(0,a.jsx)("div",{className:t.hideText,children:"Hide Map"})})})]})},{styles:e=>({section:{display:"flex",alignItems:"center",padding:"8px 16px",...e.typography.body2,[e.breakpoints.down("sm")]:{display:"inline-block",flexGrow:1,padding:"8px 22px"}},title:{padding:16},buttonText:{marginLeft:10},hideText:{fontSize:"1rem",cursor:"pointer"},actionIcon:{width:"0.7em",height:"0.7em",marginLeft:e.spacing.unit,position:"relative",top:2,cursor:"pointer"},hideSection:{backgroundColor:e.palette.panelBackground.darken05},divider:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit},subscribeSection:{cursor:"pointer",marginTop:4,marginBottom:4},subscribeIcon:{marginLeft:0,top:0}})}),e6=(0,e1.ro)(eU.zD),te=(0,eG.J)("\n  query HomepageCommunityMap($documentId: String) {\n    post(input: { selector: { documentId: $documentId } }) {\n      result {\n        ...PostsList\n      }\n    }\n  }\n"),tt=(0,e1.ro)(eU.pH),tn=(0,x.Il)("localEventWrapperPopUpStyles",e=>({loading:{padding:10,margin:-16,width:250,height:250,background:e.palette.panelBackground.default,borderRadius:e.borderRadius.default,display:"flex",alignItems:"center",justifyContent:"center",animation:"$pulseBackground 1s ease-in-out infinite"},"@keyframes pulseBackground":{"0%":{background:e.palette.grey[200]},"50%":{background:e.palette.panelBackground.default},"100%":{background:e.palette.grey[200]}}})),ta=e=>{var t;let{localEvent:n,handleClose:i}=e,o=(0,x.IS)(tn),{loading:r,data:l}=(0,eD.IT)(te,{variables:{documentId:n._id}}),s=null==l||null==(t=l.post)?void 0:t.result;if(r)return(0,a.jsx)(e6,{latitude:n.lat,longitude:n.lng,closeButton:!0,closeOnClick:!1,offsetTop:-15,offsetLeft:10,onClose:()=>i(n._id),captureClick:!0,captureScroll:!0,anchor:"bottom",children:(0,a.jsx)("div",{className:o.loading})});if(!s)return null;let{htmlHighlight:d=""}=s.contents||{};return(0,a.jsx)(e9.A,{lat:n.lat,lng:n.lng,link:(0,eQ.lz)(s),title:" [Event] ".concat(s.title," "),metaInfo:s.contactInfo,cornerLinks:(0,a.jsx)(e2.Ay,{document:s}),onClose:()=>i(s._id),offsetTop:-15,offsetLeft:10,children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:d}})})},ti=(0,x.Il)("localEventMapMarkerWrappersStyles",e=>({icon:{height:20,width:20,fill:e.palette.event,opacity:.8,cursor:"pointer","&:hover":{fill:e.palette.primary.dark,opacity:1}},iconSelected:{fill:e.palette.primary.dark,opacity:1}})),to=e=>{let{localEvents:t,onMarkerClick:n}=e,o=(0,x.IS)(ti),[r,l]=(0,i.useState)([]),s=(0,i.useCallback)(e=>{l([e]),n&&n()},[n]),d=(0,i.useCallback)(e=>{l(r.filter(t=>t!==e))},[r]);return(0,a.jsx)(i.Fragment,{children:t.map((e,t)=>{let n=r.includes(e._id);return e.lat&&e.lng?(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(tt,{latitude:e.lat,longitude:e.lng,offsetLeft:-7,offsetTop:-25,children:(0,a.jsx)("span",{onClick:()=>s(e._id),children:(0,a.jsx)(eV._e,{className:y()(o.icon,{[o.iconSelected]:n})})})}),n&&(0,a.jsx)(ta,{localEvent:e,handleClose:d})]},"mapEvent".concat(e._id)):null})})},tr=(0,g.N)("LocalEventMapMarkerWrappers",to);(0,g.N)("HomepageCommunityMap",e=>{let{dontAskUserLocation:t=!1,classes:n}=e,o=(0,T.iZ)();(0,eX.k)(o,t);let[r,l]=(0,i.useState)({latitude:eZ.Jb.lat,longitude:eZ.Jb.lng,zoom:1.1}),s=(0,i.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tr,{localEvents:e0}),(0,a.jsx)("div",{className:n.mapButtons,children:(0,a.jsx)(e8,{})})]}),[n.mapButtons]);return(0,a.jsx)("div",{className:n.root,children:(0,a.jsx)(e$.C,{...r,width:"100%",height:"100%",onViewportChange:e=>l(e),children:s})})},{styles:e=>({root:{width:"100%",height:440,[e.breakpoints.down("sm")]:{marginTop:0,marginLeft:-8},position:"relative",boxShadow:e.palette.boxShadow.default,"& .mapboxgl-popup-content":{background:e.palette.panelBackground.default},"& .StyledMapPopup-markerPageLink":{color:e.palette.text.normal}},mapButtons:{alignItems:"flex-end",position:"absolute",top:10,right:10,display:"flex",flexDirection:"column",[e.breakpoints.down("md")]:{top:24},...e.typography.body2}})});var tl=n(43618),ts=n(47590),td=n(63984);let tc=(0,x.Il)("MeetupMonthBanner",e=>({root:{position:"absolute",top:0,right:0,width:"50vw",height:"100vh","& .mapboxgl-popup-content":{background:e.palette.panelBackground.default},"& .StyledMapPopup-markerPageLink":{color:e.palette.text.normal},"& .mapboxgl-canvas":{filter:e.dark?"invert(1) brightness(2.5)":""},"& .mapboxgl-ctrl-bottom-right":{display:"none"},"& .mapboxgl-ctrl-bottom-left":{display:"none"},"& .mapboxgl-ctrl-top-right":{display:"none"},"& .mapboxgl-ctrl-top-left":{display:"none"},"&:hover":{"& $mapButtons":{opacity:1}},[e.breakpoints.down(1425)]:{display:"none"}},title:{fontSize:45,fontWeight:500,fontFamily:e.typography.headerStyle.fontFamily,fontVariant:"small-caps",color:e.palette.text.primary,zIndex:2,transition:"opacity 0.3s ease-out",marginBottom:0,lineHeight:1.2},minorTitle:{fontSize:38,fontWeight:500,[e.breakpoints.down(1525)]:{fontSize:34},fontFamily:e.typography.headerStyle.fontFamily,fontVariant:"small-caps",color:e.palette.text.primary,zIndex:2,transition:"opacity 0.3s ease-out",marginBottom:0,lineHeight:1.2},textContainer:{width:320,marginRight:20,[e.breakpoints.up(1525)]:{width:370,marginRight:0},zIndex:4,lineHeight:1.5,transition:"transform 0.5s ease-in-out, opacity 0.5s ease-in-out",transform:"translateX(0)",opacity:1,marginBottom:14,"&.transitioning":{transform:"translateX(-100%)",opacity:0},"& a":{color:e.palette.link.color}},subtitle:{fontSize:15,height:90,[e.breakpoints.up(1525)]:{fontSize:18,height:120},"& a":{color:e.dark?e.palette.primary.light:e.palette.primary.main},fontWeight:500,marginTop:12,display:"flex",flexDirection:"column",justifyContent:"center",textShadow:"0 0 5px light-dark(".concat(e.palette.background.default,", transparent), 0 0 10px light-dark(").concat(e.palette.background.default,", transparent), 0 0 15px light-dark(").concat(e.palette.background.default,", transparent)"),fontFamily:e.typography.postStyle.fontFamily,color:e.palette.text.primary,transition:"opacity 0.3s ease-out","& li":{marginLeft:-10},"& ul":{margin:0}},meetupTypes:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:320,marginRight:20,[e.breakpoints.up(1525)]:{width:370,marginRight:0},gap:8,paddingTop:10},meetupType:{background:e.palette.grey[400],color:e.palette.text.alwaysWhite,borderRadius:4,paddingLeft:10,paddingRight:10,paddingTop:7,paddingBottom:7,cursor:"pointer",fontSize:14,fontWeight:400,"&:hover":{opacity:.5},fontFamily:e.typography.body2.fontFamily,transition:"opacity 0.1s ease-out",marginBottom:10,display:"flex",alignItems:"center","& a":{textDecoration:"underline"},"& a:hover":{textDecoration:"none"}},activeMeetupType:{background:e.palette.primary.main,color:e.palette.text.alwaysWhite},activeAcxMeetupType:{background:e.palette.meetupMonth.acx,color:e.palette.text.alwaysWhite},activeIfanyoneMeetupType:{background:e.palette.meetupMonth.ifanyone,color:e.palette.text.alwaysWhite},activePetrovMeetupType:{background:e.palette.meetupMonth.petrov,color:e.palette.grey[100]},date:{fontSize:16,fontWeight:400,color:e.palette.text.primary,transition:"opacity 0.3s ease-out",marginBottom:10,opacity:.8},mapGradient:{position:"absolute",top:0,right:0,width:"100%",height:"100%",background:"radial-gradient(ellipse at top, transparent 30%, ".concat(e.palette.background.default," 100%)"),zIndex:1,pointerEvents:"none",transition:"opacity 0.3s ease-out"},mapGradientRight:{position:"absolute",top:0,right:0,width:"100%",height:"100%",background:"linear-gradient(to left, transparent 35%, ".concat(e.palette.background.default," 70%)"),[e.breakpoints.up(1620)]:{background:"linear-gradient(to left, transparent 40%, ".concat(e.palette.background.default," 100%)")},zIndex:1,pointerEvents:"none",transition:"opacity 0.3s ease-out"},mapContainer:{position:"absolute",top:0,right:0,width:"100%",height:"100%",transition:"opacity 0.3s ease-out"},mapButtonsContainer:{position:"absolute",pointerEvents:"none",top:130,right:9,zIndex:4,display:"flex",alignItems:"center",justifyContent:"center",width:"calc(100% - 400px)",[e.breakpoints.up(1525)]:{width:"calc(100% - 300px)"}},mapButtons:{alignItems:"center",pointerEvents:"auto",display:"flex",width:110,gap:12,justifyContent:"center",border:"1px solid ".concat(e.palette.grey[300]),borderRadius:10,padding:12,opacity:0,"&&:hover":{opacity:1},[e.breakpoints.down("md")]:{top:24},marginBottom:"auto"},zoomButton:{width:30,height:30,opacity:.3,"& svg":{fill:e.dark?e.palette.grey[0]:e.palette.grey[400]},"&:hover":{opacity:1},cursor:"pointer"},contentContainer:{width:"calc(100% - 400px)",[e.breakpoints.up(1525)]:{width:"calc(100% - 300px)"},paddingTop:120,paddingBottom:80,position:"absolute",zIndex:1,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center"},carouselSection:{position:"absolute",bottom:0,display:"block",opacity:1,transition:"opacity 0.15s ease-in-out, transform 0.3s ease-in-out",transform:"translateX(0)"},createEventButton:{...e.typography.commentStyle,color:e.dark?e.palette.primary.light:e.palette.primary.main,paddingTop:10,fontSize:15,display:"inline-block",cursor:"pointer",border:"none"},createEventButtonIcon:{fontSize:16,fontWeight:900,marginRight:8,marginLeft:8},acxMode:{"& svg":{fill:e.palette.meetupMonth.acx+" !important"}},ifanyoneMode:{"& svg":{fill:e.palette.meetupMonth.ifanyone+" !important"}},petrovMode:{"& svg":{fill:e.palette.meetupMonth.petrov+" !important"}}})),tp=(0,eG.J)("\n  query meetupMonthQuery {\n    HomepageCommunityEvents(limit: 500) {\n      events {\n        _id\n        lat\n        lng\n        types\n      }\n    }\n  }\n");function tu(){let e=(0,x.IS)(tc),[t,n]=(0,i.useState)(!0),[o,r]=(0,i.useState)(!1),l=(0,i.useMemo)(()=>[{title:"Meetup Month",buttonText:"All",subtitle:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"Find events near you, or annouce your own."}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:["Attend an ",(0,a.jsx)(ez.Link,{to:"/posts/mve2bunf6YfTeiAvd/meetup-month-1",children:"ACX Everywhere"})," meetup."]}),(0,a.jsxs)("li",{children:["Host a reading group for ",(0,a.jsx)(ez.Link,{to:"/posts/mve2bunf6YfTeiAvd/meetup-month-1#If_Anyone_Builds_It_reading_groups",children:"If Anyone Builds It"}),"."]}),(0,a.jsxs)("li",{children:["Hold a ceremony celebrating ",(0,a.jsx)(ez.Link,{to:"/posts/mve2bunf6YfTeiAvd/meetup-month-1#Petrov_Day",children:"Petrov Day."})]})]})]})},{minorTitle:"ACX Everywhere",subtitle:(0,a.jsxs)("div",{children:["Many cities have regular Astral Codex Ten meetup groups. Twice a year, we  advertise their upcoming meetup so that irregular attendees can attend and new readers can learn about them. ",(0,a.jsx)(ez.Link,{to:"/posts/6umEbXvotXicRPvGs/meetups-everywhere-2025-times-and-places",children:"Learn more here."})]}),buttonText:"ACX"},{minorTitle:"If Anyone Builds It",subtitle:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ez.Link,{to:"/posts/mve2bunf6YfTeiAvd/meetup-month-1#If_Anyone_Builds_It_reading_groups",children:"If Anyone Builds It, Everyone Dies"})," is launching September 16th. You can ",(0,a.jsx)(ez.Link,{to:"https://airtable.com/appgM36VHCg9MDEU3/shr4mK6ihTss27kzI",children:"sign up here"})," to get help facilitating a reading group."]}),(0,a.jsxs)(ez.Link,{to:"/newPost?eventForm=true&IFANYONE=true",target:"_blank",rel:"noopener noreferrer",className:e.createEventButton,children:[(0,a.jsx)("span",{className:e.createEventButtonIcon,children:"+"})," CREATE READING GROUP"]})]}),buttonText:"If Anyone Builds It"},{title:"Petrov Day",subtitle:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["September 26th is the day Stanislav Petrov didn't destroy the world. Host a ",(0,a.jsx)(ez.Link,{to:"/posts/mve2bunf6YfTeiAvd/meetup-month-1#Petrov_Day",children:"ceremony"})," observing the day's significance."]}),(0,a.jsxs)(ez.Link,{to:"/newPost?eventForm=true&PETROV=true",target:"_blank",rel:"noopener noreferrer",className:e.createEventButton,children:[(0,a.jsx)("span",{className:e.createEventButtonIcon,children:"+"})," CREATE PETROV EVENT"]})]}),linkText:"Petrov Day",buttonText:"Petrov Day"}],[e]),s=(0,i.useMemo)(()=>({latitude:20,longitude:-70,zoom:1.1}),[]),[d,c]=(0,i.useState)(s);(0,i.useEffect)(()=>{c({latitude:s.latitude,longitude:s.longitude,zoom:s.zoom}),n(!1)},[s]);let{data:p}=(0,eD.IT)(tp),u=(0,i.useMemo)(()=>{var e;return null!=(e=null==p?void 0:p.HomepageCommunityEvents.events)?e:[]},[null==p?void 0:p.HomepageCommunityEvents.events]),[m,g]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[b,v]=(0,i.useState)(0),[k,w]=(0,i.useState)(null),C=null!=k?k:b,S=1===C?"SSC":2===C?"IFANYONE":3===C?"PETROV":void 0,j=(0,i.useMemo)(()=>S?(0,a.jsx)(to,{localEvents:u.filter(e=>{var t;return(null!=(t=e.types)?t:[]).includes(S)})}):(0,a.jsx)(to,{onMarkerClick:()=>r(!0),localEvents:u}),[S,u]),N=(0,i.useCallback)(()=>{c(e=>({...e,zoom:Math.min(e.zoom+.5,20)}))},[]),I=(0,i.useCallback)(()=>{c(e=>({...e,zoom:Math.max(e.zoom-.5,1)}))},[]),T=(0,i.useCallback)(e=>{e!==b&&(f(!0),w(e),setTimeout(()=>{f(!1),g(!0),setTimeout(()=>{g(!1),v(e),w(null)},300)},10))},[b]);return((0,i.useEffect)(()=>{let e=setInterval(()=>{o||T((b+1)%l.length)},3e4);return()=>clearInterval(e)},[b,T,l.length,o]),t)?(0,a.jsxs)("div",{className:e.root,children:[(0,a.jsx)("div",{className:e.mapGradient}),(0,a.jsx)("div",{className:e.mapGradientRight})]}):(0,a.jsxs)("div",{className:y()(e.root),children:[(0,a.jsx)("div",{className:e.mapGradient}),(0,a.jsx)("div",{className:e.mapGradientRight}),(0,a.jsxs)("div",{className:e.mapContainer,onClick:()=>r(!0),children:[(0,a.jsx)("div",{className:e.mapButtonsContainer,children:(0,a.jsxs)("div",{className:e.mapButtons,onClick:()=>r(!0),children:[(0,a.jsx)(td.A,{className:e.zoomButton,onClick:I}),(0,a.jsx)(ts.A,{className:e.zoomButton,onClick:N})]})}),(0,a.jsxs)("div",{className:e.contentContainer,children:[(0,a.jsx)("div",{className:e.textContainer,onClick:()=>r(!0),children:l.map((t,n)=>{let i=h&&n===k,o=!h&&m&&n===b,r=!h&&m&&n===k,l="0";o?l="-100%":i?l="100%":r&&(l="0");let s=n===b||n===k;return(0,a.jsxs)("div",{className:e.carouselSection,style:{display:s?"block":"none",opacity:i||o?0:1,transition:h?"none":"opacity 0.15s ease-in-out, transform 0.3s ease-in-out",transform:"translateX(".concat(l,")")},children:[t.title&&(0,a.jsx)("h1",{className:e.title,children:t.title}),t.minorTitle&&(0,a.jsx)("h3",{className:e.minorTitle,children:t.minorTitle}),t.subtitle&&(0,a.jsx)("div",{className:e.subtitle,children:t.subtitle})]},n)})}),(0,a.jsx)("div",{className:e.meetupTypes,children:l.map((t,n)=>{let i=n===C;return(0,a.jsx)("div",{className:y()(e.meetupType,{[e.activeAcxMeetupType]:1===n&&i,[e.activeIfanyoneMeetupType]:2===n&&i,[e.activePetrovMeetupType]:3===n&&i,[e.activeMeetupType]:i}),onClick:()=>{T(n)},children:t.buttonText},n)})})]}),(0,a.jsx)("span",{className:y()({[e.acxMode]:"SSC"===S,[e.ifanyoneMode]:"IFANYONE"===S,[e.petrovMode]:"PETROV"===S}),children:(0,a.jsx)(e$.C,{...d,width:"100%",height:"100%",onViewportChange:c,scrollZoom:!1,children:j})})]})]})}let tm=(0,x.Il)("LWBackgroundImage",e=>({root:{position:"absolute",top:0,right:0},backgroundImage:{position:"absolute",width:"57vw",maxWidth:"1000px",top:"-70px",right:"-334px","-webkit-mask-image":"radial-gradient(ellipse at center top, ".concat(e.palette.text.alwaysBlack," 55%, transparent 70%)"),[e.breakpoints.up(2e3)]:{right:"0px"}},reviewResultsImage:{position:"absolute",width:"57vw",maxWidth:"1000px",top:"-70px",right:"-334px","-webkit-mask-image":"radial-gradient(ellipse at center top, ".concat(e.palette.text.alwaysBlack," 55%, transparent 70%)")},imageColumn:{position:"absolute",top:0,right:0,height:"100vh",width:"57vw",[e.breakpoints.down("sm")]:{display:"none"}},reviewVotingCanvas:{position:"absolute",width:"57vw",height:"100vh","& img":{width:"100%",height:"100vh",position:"relative",right:-40,objectFit:"cover"},maxWidth:"1000px",top:"-57px",right:"-334px","-webkit-mask-image":"radial-gradient(ellipse at center top, ".concat(e.palette.text.alwaysBlack," 55%, transparent 70%)"),[e.breakpoints.up(2e3)]:{right:"0px"}},votingResultsLink:{position:"relative",zIndex:e.zIndexes.reviewVotingCanvas,top:715,right:250,width:200,opacity:.6,textAlign:"center",display:"block","&:hover":{opacity:.4},[e.breakpoints.down(1600)]:{right:100,top:690},[e.breakpoints.down(1400)]:{right:35,top:650},"& h1":{...e.typography.headerStyle,fontSize:"2.8rem",lineHeight:"2.6rem",fontWeight:600,marginTop:20,marginBottom:0},"& h3":{...e.typography.commentStyle,fontSize:"1.4rem",lineHeight:"1.2",marginTop:16,marginBottom:6,fontStyle:"italic",opacity:.5}}})),tg=(0,g.N)("LWBackgroundImage",e=>{let{standaloneNavigation:t}=e,n=(0,x.IS)(tm),{pathname:i}=(0,E.pX)(),o=(0,eJ.R3)(i),r=t?(0,a.jsx)("div",{className:n.imageColumn,children:(0,a.jsx)(eH.A,{loading:"lazy",className:n.backgroundImage,publicId:"ohabryka_Topographic_aquarelle_book_cover_by_Thomas_W._Schaller_f9c9dbbe-4880-4f12-8ebb-b8f0b900abc1_m4k6dy_734413",darkPublicId:"ohabryka_Topographic_aquarelle_book_cover_by_Thomas_W._Schaller_f9c9dbbe-4880-4f12-8ebb-b8f0b900abc1_m4k6dy_734413_copy_lnopmw"})}):null;return ez.Link,n.votingResultsLink,eM.kF,eH.A,n.reviewResultsImage,(0,eM.IY)(),(0,eM.IY)(),(0,a.jsx)("div",{className:n.root,children:o?(0,a.jsx)(tu,{}):r})},{areEqual:"auto"});var th=n(53768),tf=n(12758),tb=n.n(tf);let ty=!!window.document&&!!window.document.createElement;class tx extends i.Component{UNSAFE_componentWillReceiveProps(e){let{appID:t,...n}=e;ty&&(window.intercomSettings={...n,app_id:t},window.Intercom&&(this.loggedIn(this.props)&&!this.loggedIn(e)?(window.Intercom("shutdown"),window.Intercom("boot",n)):window.Intercom("update",n)))}shouldComponentUpdate(){return!1}componentWillUnmount(){if(!ty||!window.Intercom)return!1;window.Intercom("shutdown"),delete window.Intercom,delete window.intercomSettings}loggedIn(e){return e.email||e.user_id}render(){return!1}constructor(e){super(e);let{appID:t,...n}=e;if(!t||!ty)return;window.Intercom||function(e,t,n,a,i){function o(){o.c(arguments)}o.q=[],o.c=function(e){o.q.push(e)},e.Intercom=o,(a=t.createElement("script")).async=1,a.src="https://widget.intercom.io/widget/"+n,t.head.appendChild(a)}(window,document,t),window.intercomSettings={...n,app_id:t},window.Intercom&&window.Intercom("boot",n)}}tx.propTypes={appID:tb().string.isRequired},tx.displayName="Intercom";let tv=(0,g.N)("IntercomWrapper",()=>{let e=(0,T.iZ)(),{pathname:t}=(0,E.zy)(),{cookiePreferences:n}=(0,G.k)(),i=n.includes("functional");return(0,eJ.Lu)(t)?null:i?e&&!e.hideIntercom?(0,a.jsx)("div",{id:"intercom-outer-frame",children:(0,a.jsx)(tx,{appID:D.uEn.get(),user_id:e._id,email:(0,th.qo)(e),name:e.displayName})}):e?null:(0,a.jsx)("div",{id:"intercom-outer-frame",children:(0,a.jsx)(tx,{appID:D.uEn.get()})}):(console.log("Not showing Intercom because functional cookies are not allowed"),null)},{styles:e=>({"@global":{...e.palette.intercom?{".intercom-launcher":{backgroundColor:e.palette.intercom.buttonBackground}}:null,".intercom-lightweight-app":{zIndex:"".concat(e.zIndexes.intercomButton," !important")},[e.breakpoints.down("sm")]:{"#intercom-container, .intercom-lightweight-app":{display:"none"}}}}),hocs:[eg.A]});var tk=n(36785),tw=n(87118),tC=n(45855),tS=n(49831);let tj=(0,g.N)("CookieTable",e=>{let{type:t,thirdPartyName:n,className:i,classes:o}=e,r=Object.values(tk.aK).filter(e=>e.type===t&&e.thirdPartyName===n);return(0,a.jsxs)("div",{className:i,children:[(0,a.jsxs)(C.o,{variant:"body1",className:o.heading,children:["Set by ",null!=n?n:"us"]}),(0,a.jsx)("div",{className:o.tableContainer,children:(0,a.jsxs)("table",{className:o.table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:o.th,children:"Name"}),(0,a.jsx)("th",{className:o.th,children:"Description"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>(0,a.jsxs)("tr",{className:o.tr,children:[(0,a.jsx)("td",{className:"".concat(o.td," ").concat(o.tdName),children:e.name}),(0,a.jsx)("td",{className:"".concat(o.td," ").concat(o.tdDescription),children:e.description})]},e.name))})]})})]})},{styles:e=>({root:{},heading:{padding:0,marginBottom:8,marginTop:8,fontWeight:600,fontSize:"1.2rem",fontFamily:e.palette.fonts.sansSerifStack},tableContainer:{borderTopLeftRadius:e.borderRadius.default,borderTopRightRadius:e.borderRadius.default,overflow:"hidden",marginBottom:8},table:{...e.typography.commentStyle,width:"100%",borderCollapse:"collapse",fontWeight:400},th:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:8,borderBottom:"1px solid ".concat(e.palette.grey[800]),borderRight:"1px solid ".concat(e.palette.primary.main),borderLeft:"1px solid ".concat(e.palette.primary.main),fontSize:"1rem",textAlign:"left"},tr:{border:"1px solid ".concat(e.palette.grey[300])},td:{padding:8,fontSize:"1rem"},tdName:{width:"40%",wordBreak:"break-all"},tdDescription:{width:"60%"}})});var tN=n(44914);let tI=e=>{let{title:t,cookieType:n,allowedCookies:o,setAllowedCookies:r,alwaysEnabled:l=!1,className:s,classes:d}=e,[c,p]=(0,i.useState)(!1),u=(0,i.useMemo)(()=>o.includes(n),[o,n]),m=(0,i.useCallback)(()=>{l||(u?r(o.filter(e=>e!==n)):r([...o,n]))},[l,u,r,o,n]),g={necessary:"Necessary cookies are essential for the website to function properly. These cookies ensure basic functionalities and security features of the website, anonymously. In general these cookies expire after 24 months.",functional:"Functional cookies are not strictly necessary but help to perform certain functionalities, such as allowing you to contact us via Intercom. In general these cookies expire after 24 months.",analytics:"Analytics cookies are used to understand how visitors interact with the website. These cookies help provide information on metrics the number of visitors, bounce rate, traffic source, etc. In general these cookies expire after 24 months."}[n],h=[...new Set(Object.values(tk.aK).filter(e=>e.type===n).map(e=>e.thirdPartyName))].sort().reverse();return(0,a.jsxs)("div",{className:s,children:[(0,a.jsxs)("div",{className:d.category,children:[(0,a.jsxs)("div",{className:d.categoryLabel,onClick:()=>p(!c),children:[(0,a.jsx)(eq.A,{icon:c?"ThickChevronDown":"ThickChevronRight"}),(0,a.jsx)(C.o,{variant:"body2",children:t})]}),l?(0,a.jsx)(C.o,{variant:"body2",className:d.checkboxOrLabel,children:(0,a.jsx)("i",{children:"always enabled"})}):(0,a.jsx)(tS.A,{className:d.checkboxOrLabel,checked:u,onChange:m})]}),(0,a.jsxs)("div",{className:y()(d.explanationContainer,{[d.open]:c}),children:[(0,a.jsx)(C.o,{variant:"body2",className:d.explanation,children:g}),h.map(e=>(0,a.jsx)(tj,{type:n,thirdPartyName:e},"".concat(n,"_").concat(e)))]})]})},tT=(0,g.N)("CookieDialog",e=>{let{onClose:t,classes:n}=e,{cookiePreferences:o,updateCookiePreferences:r}=(0,G.k)(),[l,s]=(0,i.useState)(o),d=(0,i.useCallback)(()=>{r(l),null==t||t()},[l,t,r]);return(0,a.jsxs)(tN.A,{open:!0,onClose:t,paperClassName:n.dialog,children:[(0,a.jsx)(tC.L,{className:n.title,children:"Cookie Settings"}),(0,a.jsxs)(tw.C,{className:n.content,children:[(0,a.jsxs)(C.o,{variant:"body2",className:n.blurb,children:["We use cookies to improve your experience while you navigate through the website. Necessary cookies are always stored in your browser as they are essential for the basic functionality of the website. We also use cookies for non-essential purposes such as remembering your preferences between visits, or for analytics. These cookies will be stored in your browser only with your consent. Read our full cookie policy"," ",(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"/cookiePolicy",children:"here"}),"."]}),(0,a.jsxs)(C.o,{variant:"body2",className:n.blurb,children:["If you have previously accepted cookies and are now rejecting them, you are responsible for removing any that have already been set. You can do so by refreshing the page and then following the instructions"," ",(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://support.google.com/chrome/answer/95647",children:"here"}),"."]}),(0,a.jsx)(tI,{title:"Necessary",cookieType:"necessary",allowedCookies:l,setAllowedCookies:s,alwaysEnabled:!0,classes:n,className:n.categoryWrapper}),(0,a.jsx)(tI,{title:"Functional",cookieType:"functional",allowedCookies:l,setAllowedCookies:s,classes:n,className:n.categoryWrapper}),(0,a.jsx)(tI,{title:"Analytics",cookieType:"analytics",allowedCookies:l,setAllowedCookies:s,classes:n,className:n.categoryWrapper}),(0,a.jsx)(f.A,{className:n.button,variant:"contained",color:"primary",onClick:d,children:"Save preferences"})]})]})},{styles:e=>({dialog:{margin:24},title:{marginLeft:4,padding:"24px 24px 10px","& .MuiTypography-title":{color:e.palette.grey[1e3]}},content:{minWidth:280},blurb:{marginLeft:4,marginRight:4,marginBottom:12,"& a":{textDecoration:"underline",fontWeight:600,"&:hover":{textDecoration:"underline"}}},categoryWrapper:{marginBottom:8},category:{height:48,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:e.palette.grey[100],borderRadius:e.borderRadius.default},categoryLabel:{paddingLeft:6,display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer"},checkboxOrLabel:{padding:12},explanationContainer:{maxHeight:0,overflow:"hidden",transition:"max-height 0.3s ease-in-out"},explanation:{padding:"8px 0px",fontWeight:400},open:{maxHeight:"200px",overflow:"auto"},button:{marginTop:12,marginLeft:"auto",color:e.palette.text.alwaysWhite,textTransform:"none",whiteSpace:"nowrap",fontSize:14,display:"block",boxShadow:"none"}})}),t_=(0,g.N)("CookieBanner",e=>{let{classes:t}=e,{openDialog:n}=(0,R.sp)(),{updateCookiePreferences:i}=(0,G.k)();return(0,a.jsxs)("div",{className:y()(t.bannerContainer),children:[(0,a.jsxs)(C.o,{variant:"body2",className:t.text,children:['We and our partners use cookies, including to review how our site is used and to improve our site\'s performance. By clicking "Accept all" you agree to their use. Customise your'," ",(0,a.jsx)("a",{onClick:()=>{n({name:"CookieDialog",contents:e=>{let{onClose:t}=e;return(0,a.jsx)(tT,{onClose:t})}})},children:"cookie settings"})," ","for more control, or review our cookie policy ",(0,a.jsx)("a",{href:"/cookiePolicy",children:"here"}),"."]}),(0,a.jsxs)("div",{className:t.buttonGroup,children:[(0,a.jsx)(f.A,{className:y()(t.button,t.rejectButton),variant:"contained",onClick:()=>{i(tk.t$)},children:"Reject"}),(0,a.jsx)(f.A,{className:t.button,variant:"contained",color:"primary",onClick:()=>{i(tk.Sw)},children:"Accept all"})]})]})},{styles:e=>({bannerContainer:{display:"flex",alignItems:"center",position:"fixed",bottom:0,left:0,right:0,backgroundColor:e.palette.panelBackground.cookieBanner,zIndex:1001,flexDirection:"row",justifyContent:"center",padding:"16px",[e.breakpoints.down("md")]:{padding:"16px"},[e.breakpoints.down("xs")]:{padding:14,flexDirection:"column",display:"grid"}},text:{color:e.palette.text.invertedBackgroundText,fontWeight:400,maxWidth:1200,fontSize:14,"& a":{textDecoration:"underline",fontWeight:600,"&:hover":{textDecoration:"underline"}}},buttonGroup:{display:"flex",marginTop:0,alignItems:"flex-end",marginLeft:24,[e.breakpoints.down("xs")]:{marginTop:12,marginLeft:0}},button:{textTransform:"none",color:e.palette.text.alwaysWhite,whiteSpace:"nowrap",fontSize:14,marginRight:6,boxShadow:"none",[e.breakpoints.up("sm")]:{marginBottom:0}},rejectButton:{backgroundColor:e.palette.grey[600],"&:hover":{backgroundColor:e.palette.grey[700]}}})});var tL=n(73134);let tE=(0,x.Il)("DelayedLoading",e=>({spinner:{height:10,maxWidth:100,textAlign:"center",display:"block",marginLeft:"auto",marginRight:"auto","& div":{width:10,height:10,backgroundColor:e.palette.icon.loadingDots,borderRadius:"100%",display:"inline-block","-webkit-animation":"sk-bouncedelay 1.4s infinite ease-in-out both",animation:"sk-bouncedelay 1.4s infinite ease-in-out both"}},whiteSpinner:{"& div":{backgroundColor:e.palette.icon.loadingDotsAlternate}},bounce1:{animationDelay:"0.68s !important",marginRight:5},bounce2:{animationDelay:"0.84s !important",marginRight:5},bounce3:{animationDelay:"1.0s !important",marginRight:0},"@keyframes sk-bouncedelay":{"0%, 80%, 100%":{transform:"scale(0)"},"40%":{transform:"scale(1.0)"}}})),tA=e=>{let{className:t,white:n}=e,i=(0,x.IS)(tE);return(0,a.jsxs)("div",{className:y()(i.spinner,t,{[i.whiteSpinner]:n}),children:[(0,a.jsx)("div",{className:i.bounce1}),(0,a.jsx)("div",{className:i.bounce2}),(0,a.jsx)("div",{className:i.bounce3})]})};var tB=n(92749),tR=n(67909);let tM=(0,tR.default)(()=>Promise.all([n.e(7579),n.e(4127)]).then(n.bind(n,4127)),{loadableGenerated:{webpack:()=>[4127]},ssr:!1}),tz=(0,tR.default)(()=>n.e(1044).then(n.bind(n,21044)),{loadableGenerated:{webpack:()=>[21044]},ssr:!1}),tF=(0,eG.J)("\n  mutation updateUserLayout($selector: SelectorInput!, $data: UpdateUserDataInput!) {\n    updateUser(selector: $selector, data: $data) {\n      data {\n        ...UsersCurrent\n      }\n    }\n  }\n"),tD=["termsOfUse"],tH=(0,x.Il)("Layout",e=>({main:{paddingTop:e.spacing.mainLayoutPaddingTop,paddingBottom:15,marginLeft:"auto",marginRight:"auto",minHeight:"calc(100vh - ".concat((0,q.vF)(),"px)"),gridArea:"main",[e.breakpoints.down("md")]:{paddingTop:e.isFriendlyUI?0:e.spacing.mainLayoutPaddingTop},[e.breakpoints.down("sm")]:{paddingTop:10*!e.isFriendlyUI,paddingLeft:8,paddingRight:8}},wrapper:{position:"relative",overflowX:"clip"},mainNoFooter:{paddingBottom:0},mainFullscreen:{height:"100%",padding:0},mainUnspacedGrid:{[e.breakpoints.down("sm")]:{paddingTop:0,paddingLeft:0,paddingRight:0}},fullscreen:{height:"max(100vh, 600px)",display:"flex",flexDirection:"column"},fullscreenBodyWrapper:{flexBasis:0,flexGrow:1,overflow:"auto",[e.breakpoints.down("xs")]:{overflow:"visible"}},spacedGridActivated:{'@supports (grid-template-areas: "title")':{display:"grid",gridTemplateAreas:'\n        "navSidebar ... main imageGap sunshine"\n      ',gridTemplateColumns:"\n        minmax(0, min-content)\n        minmax(0, 1fr)\n        minmax(0, min-content)\n        minmax(0, ".concat((0,D.OPm)()?7:1,"fr)\n        minmax(0, min-content)\n      ")},[e.breakpoints.down("md")]:{display:"block"}},unspacedGridActivated:{'@supports (grid-template-areas: "title")':{display:"grid",gridTemplateAreas:'\n        "navSidebar main sunshine"\n      ',gridTemplateColumns:"\n        0px\n        minmax(0, 1fr)\n        minmax(0, min-content)\n      "},"& .Layout-main":{width:"100%",paddingTop:0},[e.breakpoints.down("md")]:{display:"block"}},eaHomeLayout:{display:"flex",alignItems:"start",[e.breakpoints.down("md")]:{display:"block"}},navSidebar:{gridArea:"navSidebar"},sunshine:{gridArea:"sunshine"},languageModelLauncher:{position:"absolute",top:"-57px",right:"-334px",[e.breakpoints.down("lg")]:{display:"none"}},whiteBackground:{background:e.palette.background.pageActiveAreaBackground},"@global":{...(0,H.So)(e),p:(0,F.IX)(e),".mapboxgl-popup":{willChange:"auto !important",zIndex:e.zIndexes.styledMapPopup},"@font-face":[{fontFamily:"GreekFallback",src:"local('Arial')",unicodeRange:"U+0370-03FF, U+1F00-1FFF"},{fontFamily:"ETBookRoman",src:"url('https://res.cloudinary.com/lesswrong-2-0/raw/upload/v1723063815/et-book-roman-line-figures_tvofzs.woff') format('woff')"}],".ck-table-properties-form__alignment-row":{display:"none !important"}},searchResultsArea:{position:"absolute",zIndex:e.zIndexes.searchResults,top:0,width:"100%"},hideHomepageMapOnMobile:{[e.breakpoints.down("sm")]:{display:"none"}},stickyWrapper:{transition:"transform 200ms ease-in-out",transform:"translateY(".concat(20,"px)"),marginBottom:20},stickyWrapperHeaderVisible:{transform:"translateY(".concat((0,q.vF)()+20,"px)")}})),tP=e=>{let{children:t}=e,n=(0,x.IS)(tH),{headerVisible:o,headerAtTop:r}=(()=>{let[e,t]=(0,i.useState)({headerVisible:!0,headerAtTop:!0});return(0,i.useEffect)(()=>{let e=document.querySelector(".headroom");if(!e)return;let n=new MutationObserver(()=>{t({headerVisible:!e.classList.contains("headroom--unpinned"),headerAtTop:e.classList.contains("headroom--unfixed")})});return n.observe(e,{attributes:!0}),()=>n.disconnect()},[]),e})();return(0,a.jsx)(X,{offsetTop:0,offsetBottom:20,children:(0,a.jsx)("div",{className:y()(n.stickyWrapper,{[n.stickyWrapperHeaderVisible]:o&&!r}),children:t})})},tW=e=>{let{sticky:t,children:n}=e;return t?(0,a.jsx)(tP,{children:n}):(0,a.jsx)(a.Fragment,{children:n})};function tq(e){let{isWrapped:t}=e,{explicitConsentGiven:n,explicitConsentRequired:i}=(0,G.k)();return!0!==i||n?t?null:(0,a.jsx)(tv,{}):(0,a.jsx)(t_,{})}let tG=(0,g.N)("Layout",e=>{let t,{children:n}=e,o=(0,x.IS)(tH),r=(0,T.iZ)(),l=null==r?void 0:r._id,c=(0,i.useRef)(null),[u,m]=(0,i.useState)(!1),[g,h]=(0,i.useState)(null),f=!!r&&!!(null==r?void 0:r.hideNavigationSidebar),[b,v]=(0,i.useState)(f),k=(0,L.DP)(),{pathname:w,query:C}=(0,E.zy)(),{metadata:S}=(0,tB.S)(),j=i.useContext(d.O1),[N]=(0,tL.a)(tF),_=(0,i.useCallback)(()=>{l&&N({variables:{selector:{_id:l},data:{hideNavigationSidebar:!b}}}),v(!b)},[N,l,b]),F="white"===S.background;if((0,i.useEffect)(()=>{document.body.classList.contains(o.whiteBackground)!==F&&(F?document.body.classList.add(o.whiteBackground):document.body.classList.remove(o.whiteBackground))},[F,o.whiteBackground]),!j)throw Error("LayoutOptionsContext not set");let H=(0,i.useMemo)(()=>({disableNoKibitz:u,setDisableNoKibitz:m}),[u,m]),G=(0,i.useMemo)(()=>({autosaveEditorState:g,setAutosaveEditorState:h}),[g,h]),O=w.startsWith("/wrapped"),K=(0,L.Sy)(e=>e.palette.wrapped.background);return O?t=K:w.startsWith("/voting-portal")?t="transparent":D.fZp.get()&&(t="rgba(0, 0, 0, 0.7)"),(()=>{var e,i,l,d,u,m;let g={standaloneNavigation:!!S.hasLeftNavigationColumn,renderSunshineSidebar:(0,eJ.Xx)(w)&&!!((0,P.Xl)(r,"posts.moderate.all")||(null==r||null==(e=r.groups)?void 0:e.includes("alignmentForumAdmins")))&&!(null==r?void 0:r.hideSunshineSidebar),renderLanguageModelChatLauncher:!!r&&(0,et.jC)(r),shouldUseGridLayout:!!S.hasLeftNavigationColumn,unspacedGridLayout:(0,eJ.vt)(w)},{overridenLayoutOptions:h}=j,f=null!=(i=h.standaloneNavigation)?i:g.standaloneNavigation,x=null!=(l=h.renderSunshineSidebar)?l:g.renderSunshineSidebar,v=null!=(d=h.renderLanguageModelChatLauncher)?d:g.renderLanguageModelChatLauncher,C=null!=(u=h.shouldUseGridLayout)?u:g.shouldUseGridLayout,N=null!=(m=h.unspacedGridLayout)?m:g.unspacedGridLayout,T=(0,U.kL)()&&(0,eJ.R3)(w);return tD.some(e=>w.startsWith("/".concat(e))),(0,a.jsx)(A.Ig,{path:w,children:(0,a.jsx)(p.gt,{children:(0,a.jsx)(Z.O,{children:(0,a.jsx)(B.X,{children:(0,a.jsx)(z.Ny,{children:(0,a.jsx)(Q.z,{children:(0,a.jsx)(ej.A,{children:(0,a.jsx)(s.Ac.Provider,{value:G,children:(0,a.jsx)(eR.Ay,{children:(0,a.jsx)(s.sc.Provider,{value:H,children:(0,a.jsx)(eS.p,{children:(0,a.jsx)(V.F,{children:(0,a.jsxs)("div",{className:y()("wrapper",{"alignment-forum":(0,D.WVt)(),[o.fullscreen]:(0,eJ.tY)(w),[o.wrapper]:(0,D.OPm)()},F&&o.whiteBackground),id:"wrapper",children:[D.HWW.get()&&(0,a.jsx)(ei,{}),(0,a.jsx)(R.KU,{children:(0,a.jsxs)(M.QU,{children:[(0,a.jsxs)(W.m,{name:"fonts",children:[k.typography.fontDownloads&&k.typography.fontDownloads.map(e=>(0,a.jsx)("link",{rel:"stylesheet",href:e},"font-".concat(e))),(0,a.jsx)("meta",{httpEquiv:"Accept-CH",content:"DPR, Viewport-Width, Width"})]}),(0,a.jsx)(ef,{}),(0,a.jsx)(eC,{}),(0,a.jsx)(eB,{}),(0,a.jsx)(ee.A,{ssr:!1,children:(0,a.jsx)(tq,{isWrapped:O})}),(0,a.jsx)("noscript",{className:"noscript-warning",children:" This website requires javascript to properly function. Consider activating javascript to get access to all site functionality. "}),(0,a.jsx)("noscript",{children:(0,a.jsx)("iframe",{src:"https://www.googletagmanager.com/ns.html?id=".concat(D.See.get()),height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),!(0,eJ.Lu)(w)&&(0,a.jsx)(tl.S,{name:"Header",children:(0,a.jsx)(q.Ay,{searchResultsArea:c,standaloneNavigationPresent:f,sidebarHidden:b,toggleStandaloneNavigation:_,stayAtTop:(0,eJ.Hq)(w),backgroundColor:t})}),!1,(0,a.jsxs)("div",{className:y()({[o.spacedGridActivated]:C&&!N,[o.unspacedGridActivated]:C&&N,[o.eaHomeLayout]:T&&!x,[o.fullscreenBodyWrapper]:(0,eJ.tY)(w)}),children:[(0,U.kL)()&&!O&&(0,a.jsx)(eI,{}),f&&(0,a.jsx)(tl.S,{fallback:(0,a.jsx)("span",{}),name:"NavigationStandalone",children:(0,a.jsx)(tW,{sticky:T,children:(0,a.jsx)(ee.A,{ssr:!0,clientTiming:"mobile-aware",children:(0,a.jsx)(tl.S,{name:"NavigationStandalone",children:(0,a.jsx)(ep,{sidebarHidden:b,unspacedGridLayout:N,noTopMargin:T})})})})}),(0,a.jsx)("div",{ref:c,className:o.searchResultsArea}),(0,a.jsxs)("div",{className:y()(o.main,{[o.mainNoFooter]:S.noFooter,[o.mainFullscreen]:(0,eJ.tY)(w),[o.mainUnspacedGrid]:C&&N}),children:[(0,a.jsx)(eu.A,{children:(0,a.jsx)(I,{})}),(0,a.jsx)(eu.A,{children:(0,a.jsx)(tl.S,{name:"Route",fallback:(0,a.jsx)(tA,{}),children:n})}),!(0,eJ.tY)(w)&&!S.noFooter&&(0,a.jsx)(em,{})]}),(0,D.E9m)()&&(0,a.jsx)(tg,{standaloneNavigation:f}),x&&(0,a.jsx)("div",{className:o.sunshine,children:(0,a.jsx)(ee.A,{ssr:!1,children:(0,a.jsx)(tl.S,{name:"SunshineSidebar",children:(0,a.jsx)(tM,{})})})}),v&&(0,a.jsx)("div",{children:(0,a.jsx)(ee.A,{ssr:!1,children:(0,a.jsx)(tz,{})})})]})]})})]})})})})})})})})})})})})})})()});var tO=n(92664),tK=n(74727),tY=n(83397),tJ=n(35776),t$=n(33358),tX=n(22443),tU=n(97407);let tZ=new tX.C((e,t)=>{if(!tK.S$){let t=new URL(window.location.href),n={"request-origin-path":t.pathname+t.search,"x-apollo-operation-name":e.operationName};e.setContext({headers:n})}return t(e)});var tV=n(95105),tQ=n(44452),t0=n(56336),t1=n(94752),t9=n.n(t1);let t2="$placeholder.undefined$",t3=JSON.stringify(t2);function t4(e){let t=0,n=JSON.stringify(e,(e,n)=>void 0===n?(t++,t2):n);if(!t)return n;let a=n.replaceAll(t3,"undefined");if(a.length===n.length+t*(9-t3.length))return a;let i="$apollo.undefined$",o=JSON.stringify(e);for(;o.includes(JSON.stringify(i));)i="$apollo.undefined.".concat(Math.random());return JSON.stringify(e,(e,t)=>void 0===t?i:t).replaceAll(JSON.stringify(i),"undefined")}var t5=n(87358);let t7=(0,t0.n8)((0,tQ.so)({useInsertHtml(){let e=(0,i.useContext)(_.ServerInsertedHTMLContext);if(!e){if("browser"===t5.env.REACT_ENV)return()=>{};throw Error('The SSR build of ApolloNextAppProvider cannot be used outside of the Next App Router!\nIf you encounter this in a test, make sure that your tests are using the browser build by adding the "browser" import condition to your test setup.')}return e},stringifyForStream(e){if(!("object"==typeof e&&null!==e&&"rehydrate"in e&&"events"in e&&Array.isArray(e.events)))return t4(e);let{rehydrate:t,events:n}=e,a=n.filter(e=>"next"===e.type).map(e=>[e.id,e.value.data]).filter(e=>!!e[1]),i=t9()(a,e=>{let[t,n]=e;return t4(n)}),o=Object.values(t).map(e=>e.data).filter(e=>!!e).map(e=>{let t=t4(e),n=i[t];return{stringifiedData:t,transportIdDataTuple:n}}).filter(e=>{let{transportIdDataTuple:t}=e;return!!t});if(0===o.length)return t4(e);let r=Object.fromEntries(o.map(e=>e.transportIdDataTuple)),l="const sharedValueMap = ".concat(t4(r),";"),s=t4(t),d=t4(n);for(let e of o)s=s.replaceAll(e.stringifiedData,"sharedValueMap['".concat(e.transportIdDataTuple[0],"']")),d=d.replaceAll(e.stringifiedData,"sharedValueMap['".concat(e.transportIdDataTuple[0],"']"));let c="const rehydrate = ".concat(s,";"),p="const events = ".concat(d,";");return"(function(){".concat(l,"\n").concat(c,"\n").concat(p,"\nreturn {rehydrate,events}})()")}}));async function t8(e){let{loginToken:t,searchParams:a}=e;if(!tK.S$)throw Error("Not server");let{cookies:i,headers:o}=await n.e(684).then(n.bind(n,20684)),{getApolloClientForSSR:r}=await n.e(8149).then(n.bind(n,68149)),[l,s]=await Promise.all([i(),o()]);return await r({loginToken:t,cookies:l,headers:s,searchParams:a})}function t6(e){let{loginToken:t,searchParams:n,children:o}=e;if(tK.S$){let e=(0,i.use)(t8({loginToken:t,searchParams:n})),r=(0,i.useCallback)(()=>e,[e]);return(0,a.jsx)(t7,{makeClient:r,children:o})}{let e=(0,i.useCallback)(()=>(function(e){let{loginToken:t}=e;if(tK.S$)throw Error("Not client");let n=new tV.Ri({cache:new tV.D9,link:tX.C.from([tZ,(0,tJ.S)(e=>{let{error:t}=e}),((e,t)=>{let n=e+"graphql",a="/"===e||e===(0,tU.R_)(),i=tK.S$?(e,n)=>globalThis.fetch(e,{...n,headers:{...null==n?void 0:n.headers,"User-Agent":"ForumMagnum/2.1",...t?{loginToken:t}:{}}}):globalThis.fetch;return new tY.z({uri:n,credentials:a?"same-origin":"omit",batchMax:tK.S$?1:D.UL1.get(),fetch:i,batchKey:e=>{let t=e.getContext(),a={http:t.http,options:t.fetchOptions,credentials:t.credentials,headers:t.headers},i=(0,t$.z)(e,n)+JSON.stringify(a),o=t.batchKey;return o&&"string"==typeof o?i:i+o}})})(tK.S$?(0,tU.R_)():"/",t)])});return n.prioritizeCacheValues=!0,setTimeout(()=>{n.prioritizeCacheValues=!1},3e3),n})({loginToken:t}),[t]);return(0,a.jsx)(t7,{makeClient:e,children:o})}}t7.info={pkg:"@apollo/client-integration-nextjs",client:"ApolloClient",cache:"InMemoryCache"},(0,n(69623).gi)();var ne=n(98685);el().updateLocale("en",{relativeTime:{future:"%s",past:"%s",s:"now",ss:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}}),window.t3aAnalytics=(e,t)=>{(0,A.r)("type3.".concat(e),t)},n(94438);let nt=!1;tK.oc&&function(){if(!nt){nt=!0,document.cookie.split("; ").find(e=>e.startsWith(eh.PD))||(document.cookie="".concat(eh.PD,"=").concat((0,ex.zE)(),"; path=/; max-age=315360000")),window.tabId||(window.tabId=(0,ex.zE)());let e=D.See.get();e&&function(e,t,n,a,i){if(e[a]=e[a]||[],null==(r=e[a])||null==(o=r[0])?void 0:o["gtm.start"])return console.warn("googleTagManagerInit has already run, aborting");e[a].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var o,r,l=t.getElementsByTagName(n)[0],s=t.createElement(n);s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id="+i+("dataLayer"!==a?"&l="+a:""),l.parentNode.insertBefore(s,l)}(window,document,"script","dataLayer",e),(0,ne.y)()}}();let nn=e=>{let{children:t}=e,n=(0,i.useRef)(null),o=(0,i.useRef)(null),r=(0,_.useRouter)(),l=(0,i.useRef)({history:r}),s=(0,_.useSearchParams)(),d=s.toString(),c={};[...s.entries()].reduce((e,t)=>{let[n,a]=t;return e[n]?Array.isArray(e[n])?e[n].push(a):e[n]=[e[n],a]:e[n]=a,e},c);let p=(0,_.usePathname)(),g=tK.oc?window.location.hash:"";(0,i.useEffect)(()=>{let e=e=>{let t=new URL(e.newURL).hash;n.current&&Object.assign(n.current,{hash:t}),o.current&&(o.current={...o.current,hash:t})};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]);let h="".concat(p).concat(d?"?".concat(d):"").concat(g||""),f=(0,m.Rr)(h),b={hash:g,params:(0,_.useParams)(),pathname:p,query:c,url:h,location:f};return n.current?Object.assign(n.current,b):n.current={...b},l.current?l.current.history=r:l.current={history:r},o.current&&o.current.pathname===b.pathname&&JSON.stringify(o.current.query)===JSON.stringify(b.query)&&o.current.hash===b.hash?Object.assign(o.current,b):o.current={...b},(0,a.jsx)(tO.vd,{children:(0,a.jsx)(u.LocationContext.Provider,{value:n.current,children:(0,a.jsx)(u.NavigationContext.Provider,{value:l.current,children:(0,a.jsx)(u.SubscribeLocationContext.Provider,{value:o.current,children:(0,a.jsx)(N,{children:(0,a.jsx)(tG,{children:t})})})})})})},na=e=>{let{ssrMetadata:t,children:n}=e,[o,r]=(0,i.useState)(t?{...t,matchSSR:!0}:{matchSSR:!1}),[l,s]=(0,i.useTransition)();return(0,i.useEffect)(()=>{!1!==o.matchSSR&&s(()=>{r({matchSSR:!1})})},[o.matchSSR]),(0,a.jsx)(c.Dh.Provider,{value:o,children:n})},ni=e=>{let t,r,{abTestGroupsUsed:c,ssrMetadata:u,children:m}=e;if(tK.S$){let{cookies:e}=(0,i.use)(n.e(684).then(n.bind(n,20684)));r=(0,i.use)(e()).getAll(),t=new o.A(Object.fromEntries(r.map(e=>[e.name,e.value])))}else{let e=document.cookie;r=e.split(";").map(e=>{let[t,n]=e.split("=");return{name:t,value:n}}),t=new o.A(e)}let g=(0,_.useSearchParams)(),h=t.get("loginToken");return(0,a.jsx)(eD.F8.Provider,{value:tK.S$,children:(0,a.jsx)(t6,{loginToken:null!=h?h:null,searchParams:Object.fromEntries(g.entries()),children:(0,a.jsx)(l,{cookies:t,children:(0,a.jsx)(T.ac,{children:(0,a.jsx)(p.wX,{children:(0,a.jsx)(s.oe.Provider,{value:c,children:(0,a.jsx)(d.V1,{children:(0,a.jsx)(na,{ssrMetadata:u,children:(0,a.jsx)(nn,{children:m})})})})})})})})})}},79711:(e,t,n)=>{"use strict";n.d(t,{aH:()=>o,So:()=>l,Az:()=>a,$m:()=>i});let a="@media screen and (max-width: 715px)",i="@media screen and (max-width: 400px)",o=17,r=(e,t,n)=>{let a={};for(let i=1;i<=6;i++){let o=e.palette.text.debateComment["".concat(i)];a[t(i)]=n(o)}return a},l=e=>({...(e=>({html:{fontSize:e.baseFontSize,boxSizing:"border-box","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",color:e.palette.text.maxIntensity},"*, *::before, *::after":{boxSizing:"inherit"},body:{margin:0,background:e.palette.background.default,"@media print":{background:e.palette.panelBackground.default}},"h1, h2, h3, h4":{fontWeight:500},"textarea, textarea:focus, input, input:focus":{border:"none",outline:"none",fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0,color:e.palette.text.maxIntensity},button:{border:"none",boxShadow:"none",cursor:"pointer"},figure:{margin:"1em 0"}}))(e),...(e=>({".message.error":{color:e.palette.text.error2},".ais-InstantSearch__root":{fontFamily:"inherit !important"},".noscript-warning":{padding:20,fontSize:17},a:{cursor:"pointer",color:"inherit",textDecoration:"none"},"a:hover, a:active":{textDecoration:"none",opacity:.5},".grecaptcha-badge":{visibility:"hidden"},".reCaptcha-text":{fontFamily:"sans-serif",color:e.palette.text.dim,fontSize:11},".thoughtSaverFrame":{width:"100%",height:"500px",border:"none",borderRadius:5},".ck-mentions-balloon":{"--ck-color-list-background":e.palette.panelBackground.default,"--ck-color-panel-background":e.palette.panelBackground.default,"--ck-color-panel-border":e.palette.border.mentionsBaloon,"--ck-color-text":e.palette.text.maxIntensity,"--ck-color-list-button-hover-background":e.palette.buttons.mentions.hover,"--ck-color-list-button-on-background":e.palette.buttons.mentions.selected,"--ck-color-list-button-on-background-focus":e.palette.buttons.mentions.selectedHover},".ck-comment-marker":{borderTop:"none !important",borderBottom:"none !important"},".ck-powered-by, .ck-powered-by-balloon":{display:"none !important"},...e.isFriendlyUI?{".mapboxgl-popup-content":{background:"".concat(e.palette.panelBackground.mapboxTooltip," !important")},".mapboxgl-popup-tip":{borderTopColor:"".concat(e.palette.panelBackground.mapboxTooltip," !important")},".mapboxgl-popup-close-button":{color:"".concat(e.palette.text.normal," !important")}}:{}}))(e),...(e=>({".comments-node-even":{backgroundColor:e.palette.panelBackground.commentNodeEven},".comments-node-odd":{backgroundColor:e.palette.panelBackground.commentNodeOdd},".comments-node-root":{marginBottom:o,[a]:{marginBottom:10},[i]:{marginBottom:8,paddingTop:5},background:e.palette.panelBackground.commentNodeRoot,backdropFilter:e.palette.filters.bannerAdBlurHeavy},".comments-node .comments-node":{[i]:{marginLeft:5,marginBottom:5}},".comments-edit-form":{position:"relative",paddingBottom:12,"& .form-submit":{textAlign:"right",marginRight:10}},".comments-load-more":{marginLeft:10},".comments-node-its-getting-nested-here":{marginLeft:"7px !important",marginBottom:"7px !important"},".comments-node-so-take-off-all-your-margins":{marginLeft:"6px !important",marginBottom:"6px !important"},".comments-node-im-getting-so-nested":{marginLeft:"5px !important",marginBottom:"5px !important"},".comments-node-im-gonna-drop-my-margins":{marginLeft:"5px !important",marginBottom:"5px !important"},".comments-node-what-are-you-even-arguing-about":{marginLeft:"4px !important",marginBottom:"4px !important"},".comments-node-are-you-sure-this-is-a-good-idea":{marginLeft:"3px !important",marginBottom:"3px !important"},".comments-node-seriously-what-the-fuck":{marginLeft:"2px !important",marginBottom:"2px !important",transform:"rotate(.5deg)"},".comments-node-are-you-curi-and-lumifer-specifically":{marginLeft:"1px !important",marginBottom:"1px !important",transform:"rotate(1deg)"},".comments-node-cuz-i-guess-that-makes-sense-but-like-really-tho":{marginLeft:"1px !important",marginBottom:"1px !important",transform:"rotate(-1deg)"},".recent-comments-node":{"&.loading":{minHeight:80,padding:35,backgroundColor:e.palette.panelBackground.commentNodeEven},"& .comments-node":{margin:0},"&.comments-node-root":{backgroundColor:"none",marginBottom:".8em",position:"inherit"}}}))(e),...(e=>({".dialogue-message-input-wrapper":{display:"flex",flexDirection:"column",marginTop:12},".dialogue-message-input":{padding:"26px 16px 40px 16px",position:"relative",margin:"12px 0",order:2,...e.isFriendlyUI?{fontSize:"1.1rem","& p, & div, & span, & li, & blockquote, & pre":{fontSize:"1.1rem"},borderRadius:e.borderRadius.small,border:"2px solid transparent",...r(e,e=>'&[user-order="'.concat(e,'"]'),e=>({borderColor:"".concat(e," !important")}))}:{borderRadius:3,border:"2px solid !important",...r(e,e=>'&[user-order="'.concat(e,'"] .dialogue-message-input-header'),e=>({color:"".concat(e," !important")}))}},".dialogue-message-input-header":{position:"absolute",top:-14,backgroundColor:e.palette.grey[0],padding:e.isFriendlyUI?"4px 8px":4,borderRadius:e.isFriendlyUI?e.borderRadius.small:void 0},".dialogue-message-input button":{marginRight:-8,display:"block",position:"absolute",...e.isFriendlyUI?{right:12,bottom:5,color:e.palette.grey[1e3],backgroundColor:e.palette.grey[250],"&:hover":{backgroundColor:e.palette.grey[300]}}:{right:16,padding:0,minHeight:"unset",marginLeft:"auto",marginBottom:-4,bottom:12}},".dialogue-message":{marginTop:6,position:"relative",...e.isFriendlyUI?{fontSize:"1.1rem","& p, & div, & span, & li, & blockquote, & pre":{fontSize:"1.1rem"},marginBottom:22,padding:"22px 8px 0px 12px","&:after":{display:"block",position:"absolute",content:"''",top:0,left:0,height:"calc(100% - 3px)",borderRight:"2px solid transparent"},"& .dialogue-message-header b":{fontWeight:700},...r(e,e=>'&[user-order="'.concat(e,'"]:after'),e=>({borderColor:e}))}:{padding:"22px 8px 8px 0px",...r(e,e=>'&[user-order="'.concat(e,'"] .dialogue-message-header'),e=>({color:"".concat(e," !important")}))}},".dialogue-message p, .dialogue-message-input p":{marginBottom:"0px !important"},".dialogue-message-header":{position:"absolute",top:e.isFriendlyUI?-4:0},".dialogue-message-header b":{fontWeight:600}}))(e),...(e=>({"body.t3a-sticky-player-visible .StickyDigestAd-root":{bottom:78},".t3a-heading-play-button":{display:"none"},"@media screen and (min-width: 850px)":{".t3a-heading-play-button":{display:"block",position:"absolute",top:0,left:0,marginLeft:-34,marginRight:10,borderRadius:9999,border:"none",width:"1.5rem",height:"1.5rem",outline:"none",cursor:"pointer",transform:"translate(0, 0)",zIndex:10,backgroundColor:e.palette.grey[310],color:e.palette.grey[0],"&:hover":{backgroundColor:e.palette.grey[400]},"&:focus":{outline:"none"}},".t3a-heading-play-icon":{display:"flex",justifyContent:"center",alignItems:"center",marginRight:-1},"h1 .t3a-heading-play-button":{marginTop:10},"h2 .t3a-heading-play-button":{marginTop:7},"h3 .t3a-heading-play-button":{marginTop:3}}}))(e),...(e=>({"@global":{".editor":{minHeight:220,borderRadius:2,marginBottom:"2em"},".editor blockquote div, .editor blockquote span":{margin:0},"figure:after":{content:"Foo",visibility:"hidden",display:"block",height:0,clear:"both"},".draft-image":{display:"block"},".draft-image.center":{marginLeft:"auto",marginRight:"auto"},".draft-image.right":{float:"right"},".form-component-CommentEditor":{position:"static !important"},".form-component-EditorFormComponent":{position:"static !important"},".dividerBlock":{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",margin:"32px 0",border:"none",textAlign:"center"},".dividerBlock::after":{marginLeft:12,color:e.palette.greyAlpha(.26),fontSize:"1rem",letterSpacing:12,content:""},html:{"--ck-z-panel":"10000000002 !important","--ck-z-modal":"10000000002 !important"},".form-input":{margin:"16px 0",position:"relative"},".form-component-EditTitle":{margin:0,flexGrow:1},".form-cancel":{marginLeft:25},".form-component-MuiInput":{marginBottom:0},".form-component-AlignmentCheckbox":{position:"relative"},"@media screen and (max-width: 715px)":{".primary-form-submit-button":{float:"left"}},h3:{marginTop:0},".ais-Breadcrumb-list,.ais-CurrentRefinements-list,.ais-HierarchicalMenu-list,.ais-Hits-list,.ais-InfiniteHits-list,.ais-InfiniteResults-list,.ais-Menu-list,.ais-NumericMenu-list,.ais-Pagination-list,.ais-RatingMenu-list,.ais-RefinementList-list,.ais-Results-list,.ais-ToggleRefinement-list":{margin:0,padding:0,listStyle:"none"},".ais-ClearRefinements-button,.ais-CurrentRefinements-delete,.ais-CurrentRefinements-reset,.ais-HierarchicalMenu-showMore,.ais-InfiniteHits-loadMore,.ais-InfiniteResults-loadMore,.ais-Menu-showMore,.ais-RangeInput-submit,.ais-RefinementList-showMore,.ais-SearchBox-reset,.ais-SearchBox-submit":{padding:0,overflow:"visible",font:"inherit",lineHeight:"normal",color:"inherit",background:"none",border:0,cursor:"pointer","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",userSelect:"none"},".ais-ClearRefinements-button::-moz-focus-inner,.ais-CurrentRefinements-delete::-moz-focus-inner,.ais-CurrentRefinements-reset::-moz-focus-inner,.ais-HierarchicalMenu-showMore::-moz-focus-inner,.ais-InfiniteHits-loadMore::-moz-focus-inner,.ais-InfiniteResults-loadMore::-moz-focus-inner,.ais-Menu-showMore::-moz-focus-inner,.ais-RangeInput-submit::-moz-focus-inner,.ais-RefinementList-showMore::-moz-focus-inner,.ais-SearchBox-reset::-moz-focus-inner,.ais-SearchBox-submit::-moz-focus-inner":{padding:0,border:0},".ais-ClearRefinements-button[disabled],.ais-CurrentRefinements-delete[disabled],.ais-CurrentRefinements-reset[disabled],.ais-HierarchicalMenu-showMore[disabled],.ais-InfiniteHits-loadMore[disabled],.ais-InfiniteResults-loadMore[disabled],.ais-Menu-showMore[disabled],.ais-RangeInput-submit[disabled],.ais-RefinementList-showMore[disabled],.ais-SearchBox-reset[disabled],.ais-SearchBox-submit[disabled]":{cursor:"default"},".ais-Breadcrumb-item,.ais-Breadcrumb-list,.ais-Pagination-list,.ais-PoweredBy,.ais-RangeInput-form,.ais-RatingMenu-link":{display:"flex","-webkit-box-align":"center","-ms-flex-align":"center",alignItems:"center"},".ais-HierarchicalMenu-list .ais-HierarchicalMenu-list":{marginLeft:"1em"},".ais-PoweredBy-logo":{display:"block",width:70,height:"auto"},".ais-RatingMenu-starIcon":{display:"block",width:20,height:20},".ais-SearchBox-input::-ms-clear,.ais-SearchBox-input::-ms-reveal":{display:"none",width:0,height:0},".ais-SearchBox-input::-webkit-search-cancel-button,.ais-SearchBox-input::-webkit-search-decoration,.ais-SearchBox-input::-webkit-search-results-button,.ais-SearchBox-input::-webkit-search-results-decoration":{display:"none"},".ais-RangeSlider .rheostat":{overflow:"visible",marginTop:40,marginBottom:40},".ais-RangeSlider .rheostat-background":{height:6,top:0,width:"100%",position:"relative",backgroundColor:e.palette.panelBackground.default,border:"1px solid ".concat(e.palette.grey.A200)},".ais-RangeSlider .rheostat-handle":{marginLeft:-12,top:-7},".ais-RangeSlider .rheostat-progress":{position:"absolute",top:1,height:4,backgroundColor:e.palette.grey.A400},".rheostat-handle":{position:"relative",zIndex:1,width:20,height:20,backgroundColor:e.palette.panelBackground.default,border:"1px solid ".concat(e.palette.grey.A400),borderRadius:"50%",cursor:"grab"},".rheostat-marker":{marginLeft:-1,position:"absolute",width:1,height:5,backgroundColor:e.palette.grey.A200},".rheostat-marker--large":{height:9},".rheostat-value":{paddingTop:15},".rheostat-tooltip,.rheostat-value":{marginLeft:"50%",position:"absolute",textAlign:"center","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"},".rheostat-tooltip":{top:-22}}}))(e)})},87732:(e,t,n)=>{"use strict";n.d(t,{h:()=>b,p:()=>h});var a=n(95155),i=n(12115),o=n(86552),r=n(13025),l=n(36944),s=n(84999),d=n(40329),c=n(70097),p=n(67909);let u=(0,p.default)(()=>Promise.resolve().then(n.bind(n,63591)),{loadableGenerated:{webpack:()=>[63591]},ssr:!1}),m=(0,p.default)(()=>n.e(373).then(n.bind(n,10373)),{loadableGenerated:{webpack:()=>[10373]},ssr:!1}),g=(0,d.Il)("CommentOnSelectionContentWrapper",e=>({toolbarWrapper:{position:"absolute"},toolbar:{display:"flex",borderRadius:8,color:e.palette.icon.dim,zIndex:e.zIndexes.lwPopper,padding:8,paddingBottom:6,cursor:"pointer","&:hover":{background:e.palette.panelBackground.darken08},[e.breakpoints.down("xs")]:{display:(0,s.uV)()?"none":"initial"}}})),h=e=>{let{children:t}=e,[n,o]=(0,i.useState)({open:!1}),l=(0,i.useCallback)(()=>{o(e=>e.open?{open:!1}:e)},[]);return(0,i.useEffect)(()=>{let e=()=>{let e=document.getSelection(),t=e+"";if(!e||!(null==t?void 0:t.length))return void l();let n=null,a=!0;for(let t=0;t<e.rangeCount;t++){let i=e.getRangeAt(t).commonAncestorContainer,o=y(i);n?i!==n&&(a=!1):n=o}if(!n||!a)return void l();let i=e.getRangeAt(0).getBoundingClientRect(),r=n.getBoundingClientRect();o({open:!0,x:window.scrollX+Math.max(i.x+i.width,r.x+r.width),y:i.y+window.scrollY})};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}},[l]),(0,r.M)(()=>{l()}),(0,a.jsxs)(a.Fragment,{children:[t,n.open&&(0,a.jsx)(f,{onClickComment:()=>{var e;let t=null==(e=document.getSelection())?void 0:e.anchorNode;if(!t)return;let n=y(t);if(!n)return;let a=function(e){if(!e||!e.rangeCount)return"";var t=document.createElement("div");for(let n=0;n<e.rangeCount;n++)t.appendChild(e.getRangeAt(n).cloneContents());let n=t.innerHTML;return"<blockquote>".concat(n,"</blockquote><p></p>")}(document.getSelection());n.onClickComment(a)},x:n.x,y:n.y})]})},f=e=>{let{onClickComment:t,x:n,y:i}=e,r=(0,d.IS)(g),{captureEvent:s}=(0,l.z1)();return(0,a.jsx)("div",{className:r.toolbarWrapper,style:{left:n,top:i},children:(0,a.jsx)(u,{inlineBlock:!1,title:(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:"Click to comment on the selected text"})}),children:(0,a.jsx)("div",{className:r.toolbar,children:(0,a.jsx)(l.Ig,{pageElementContext:"selectedTextToolbar",children:(0,a.jsx)(o.A,{onClick:e=>{s("commentOnSelectionClicked"),t(e)}})})})})})},b=e=>{let{post:t,children:n}=e,{openDialog:o}=(0,c.sp)(),r=(0,i.useRef)(null),l=(0,i.useCallback)(e=>{o({name:"ReplyCommentDialog",contents:n=>{let{onClose:i}=n;return(0,a.jsx)(m,{onClose:i,post:t,initialHtml:e})}})},[o,t]);return((0,i.useEffect)(()=>{if(r.current){let e=r.current;return e.onClickComment=l,()=>{e.onClickComment=null}}},[l]),(0,s.uV)())?(0,a.jsx)("div",{className:"commentOnSelection",ref:r,children:n}):(0,a.jsx)(a.Fragment,{children:n})};function y(e){var t=e=>!!e.onClickComment;if(!e)return null;let n=e.parentElement;for(;n&&!t(n);)n=n.parentElement;return n}},94438:()=>{window.requestIdleCallback||(window.requestIdleCallback=function(e,t){let n=t||{};var a=n.timeout||1,i=performance.now();return setTimeout(function(){e({get didTimeout(){return!n.timeout&&performance.now()-i-1>a},timeRemaining:function(){return Math.max(0,1+(performance.now()-i))}})},1)}),window.cancelIdleCallback||(window.cancelIdleCallback=function(e){clearTimeout(e)})},96385:(e,t,n)=>{Promise.resolve().then(n.bind(n,70500)),Promise.resolve().then(n.bind(n,92749)),Promise.resolve().then(n.bind(n,76776)),Promise.resolve().then(n.bind(n,5823)),Promise.resolve().then(n.bind(n,39999))}},e=>{e.O(0,[586,7596,5579,2545,8783,240,4609,2433,6394,375,6908,4321,2378,6949,1460,6201,2107,6374,7295,4758,9334,2664,7289,1767,9866,5604,4278,361,5884,329,7475,5521,2217,9063,5954,4100,9385,3377,1444,2428,7962,3282,4850,8441,1338,7358],()=>e(e.s=96385)),_N_E=e.O()}]);
//# sourceMappingURL=layout-52e0ab935ed35a55.js.map
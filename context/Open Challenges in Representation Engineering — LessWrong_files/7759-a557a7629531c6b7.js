try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a46cc427-162e-4971-af53-8ae906ff4a78",e._sentryDebugIdIdentifier="sentry-dbid-a46cc427-162e-4971-af53-8ae906ff4a78")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7759],{8396:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(95155),s=n(12115),o=n(88262),a=n(40329),r=n(11559),l=n(62813),d=n(17759),c=n(11457),m=n(96237),u=n(86762),f=n(72561),g=n(79850);let h=(0,a.Il)("LensRevisionItem",e=>({contentStyle:{},container:{}})),p=(0,o.N)("LensRevisionItem",e=>{let{tag:t,collapsed:n,lens:o,revision:r,noContainer:p=!1,showIcon:x=!1}=e,v=(0,a.IS)(h),b=(0,a.IS)(d.X),y=o._id,[j,S]=(0,s.useState)(!1);if(!y||!r)return null;let I=(0,l.wh)(t,r.version,o),$=(0,i.jsxs)("div",{children:["Lens: ","".concat(o.tabTitle).concat(o.tabSubtitle?" (".concat(o.tabSubtitle,")"):"")]}),A=(0,i.jsx)(g.A,{contentType:"comment",className:v.contentStyle,children:(0,i.jsx)(m.A,{trim:!0,collectionName:"MultiDocuments",fieldName:"contents",documentId:y,versionBefore:null,versionAfter:r.version,revisionAfter:r})}),k=n&&!j?(0,i.jsx)(u.A,{tag:t,itemDescription:$,url:I,revision:r}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(u.A,{tag:t,itemDescription:$,url:I,revision:r})}),A]});return p?k:(0,i.jsx)(c.A,{icon:x?(0,i.jsx)(f.A,{className:b.feedIcon,icon:"Edit"}):void 0,frame:!0,expands:!0,expanded:j||!n,setExpanded:S,tooltip:!(j||!n)&&A,children:(0,i.jsx)("div",{className:v.container,children:k})})},{hocs:[r.A]})},9140:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(95155);n(12115);var s=n(88262),o=n(66121),a=n(69914),r=n(53018),l=n(62813),d=n(22299),c=n.n(d),m=n(85197),u=n(87700),f=n(96973),g=n(65180),h=n(97885);let p=(0,h.J)("\n  query multiCommentTagDiscussionQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n"),x=(0,s.N)("TagDiscussion",e=>{var t,n,s;let{classes:a,tag:r}=e,{data:d,loading:h}=(0,g.IT)(p,{variables:{selector:{tagDiscussionComments:{tagId:null==r?void 0:r._id}},limit:7,enableTotal:!0},skip:!(null==r?void 0:r._id),fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),x=null==d||null==(t=d.comments)?void 0:t.results,v=null!=(s=null==d||null==(n=d.comments)?void 0:n.totalCount)?s:0;if(!r)return null;if(h)return(0,i.jsx)("div",{className:c()(a.root,a.loading),children:(0,i.jsx)(f.default,{})});if((null==x?void 0:x.length)===0)return null;let b=x&&(0,m.aF)(x);return(0,i.jsxs)("div",{className:a.root,children:[x&&(0,i.jsx)(u.A,{treeOptions:{tag:r,postPage:!0,showCollapseButtons:!0},totalComments:v,comments:b}),(0,i.jsx)(o.Link,{to:(0,l.Ag)(r),className:a.seeAll,children:"See all"})]})},{styles:e=>({root:{width:400,maxHeight:600,overflowY:"auto",padding:6},loading:{padding:20,height:100},seeAll:{...e.typography.body2,...e.typography.commentStyle,marginLeft:6,color:e.palette.primary.main}})});var v=n(75693);let b=(0,h.J)("\n  query multiCommentTagDiscussionButtonQuery($selector: CommentSelector, $limit: Int, $enableTotal: Boolean) {\n    comments(selector: $selector, limit: $limit, enableTotal: $enableTotal) {\n      results {\n        ...CommentsList\n      }\n      totalCount\n    }\n  }\n"),y=(0,s.N)("TagDiscussionButton",e=>{var t;let{tag:n,text:s="Discussion",hideLabel:d=!1,hideParens:m=!1,hideLabelOnMobile:u=!1,classes:f}=e,{hover:h,anchorEl:p,eventHandlers:y}=(0,r.M)(),{data:j,loading:S}=(0,g.IT)(b,{variables:{selector:{tagDiscussionComments:{tagId:n._id}},limit:0,enableTotal:!0},notifyOnNetworkStatusChange:!0,ssr:!1}),I=null==j||null==(t=j.comments)?void 0:t.totalCount,$=d?f.hideLabel:f.text,A=u?f.hideOnMobile:f.text,k=d?f.discussionCountWithoutLabel:f.discussionCount,C=h&&(S||(null!=I?I:0)>0);return(0,i.jsxs)(o.Link,{className:f.discussionButton,to:(0,l.Ag)(n),...y,children:[(0,i.jsx)(a.A,{className:f.discussionButtonIcon}),(0,i.jsx)("span",{className:c()($,A),children:s}),!S&&(0,i.jsx)("span",{className:k,children:m?null!=I?I:0:"(".concat(null!=I?I:0,")")}),(0,i.jsx)(v.A,{open:C,anchorEl:p,placement:"bottom-start",children:(0,i.jsx)(x,{tag:n})})]})},{styles:e=>({discussionButton:{...e.typography.commentStyle,...e.typography.body2,color:e.palette.grey[700],display:"flex",alignItems:"center",marginLeft:"auto"},discussionButtonIcon:{height:20,width:20,marginRight:4,cursor:"pointer",color:e.palette.grey[700]},discussionCount:{[e.breakpoints.down("sm")]:{alignSelf:"flex-start",marginTop:e.isFriendlyUI?void 0:-2}},discussionCountWithoutLabel:{alignSelf:"flex-start",marginTop:-2},hideOnMobile:{marginRight:2,[e.breakpoints.down("sm")]:{display:"none"}},hideLabel:{display:"none"},text:{marginRight:2}})})},11457:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(95155);n(12115);var s=n(88262),o=n(40329),a=n(22299),r=n.n(a),l=n(86055),d=n(63591);let c=(0,o.Il)("SingleLineFeedEvent",e=>({root:{display:"flex",...e.typography.body2,marginTop:8,marginBottom:8,width:"100%"},tooltipWrapper:{width:"100%"},frame:{borderRadius:3,marginTop:0,marginBottom:0,padding:12,paddingTop:6,color:e.palette.text.dim60,backgroundColor:e.palette.panelBackground.default,border:e.palette.border.faint},expandable:{cursor:"pointer"},itemDot:{display:"inline-block",marginRight:8,width:20,textAlign:"center",color:e.palette.grey[680]},icon:{flexShrink:0,flexGrow:0,marginTop:4,marginRight:12},iconNextToFrame:{marginTop:12},contents:{display:"inline-block",position:"relative",flexShrink:1,flexGrow:1,minWidth:0},preview:{padding:16,maxWidth:400}})),m=(0,s.N)("SingleLineFeedEvent",e=>{let{expands:t=!1,expanded:n=!1,setExpanded:s,frame:a,icon:m,tooltip:u=null,children:f}=e,g=(0,o.IS)(c),h=(0,i.jsxs)("div",{className:r()(g.root,t&&!n&&g.expandable),onClick:function(){t&&(null==s||s(!0))},children:[m&&(0,i.jsx)("div",{className:r()(g.icon,a&&g.iconNextToFrame),children:m}),(0,i.jsx)("div",{className:r()(g.contents,a&&g.frame),children:f})]});return u?(0,i.jsx)(d.default,{className:g.tooltipWrapper,title:(0,i.jsx)(l.t,{className:g.preview,children:u}),tooltip:!1,placement:"bottom-end",children:h}):h})},17759:(e,t,n)=>{n.d(t,{default:()=>Q,X:()=>Y});var i=n(95155),s=n(12115),o=n(88262),a=n(45635),r=n(5501),l=n(74461),d=n(94752),c=n.n(d),m=n(50893),u=n(40329),f=n(49831),g=n(79116),h=n(84999),p=n(62813),x=n(22299),v=n.n(x),b=n(41831),y=n(19380),j=n(73147),S=n(52987),I=n(79675),$=n(93664),A=n(60442),k=n(21685),C=n(8396),N=n(11457),F=n(96237),w=n(79850),R=n(72561),T=n(86762);let D=(0,u.Il)("SummaryRevisionItem",e=>({container:{},username:{}})),L=(0,o.N)("SummaryRevisionItem",e=>{var t;let{tag:n,collapsed:o,revision:a}=e;(0,u.IS)(D);let r=(0,u.IS)(Y),[l,d]=(0,s.useState)(!1),c=null!=(t=a.documentId)?t:"",m=a.summary,f=(null==m?void 0:m.parentLens)?(0,i.jsxs)("div",{children:["Summary of lens ",m.parentLens.tabTitle,": ","".concat(m.tabTitle).concat(m.tabSubtitle?" (".concat(m.tabSubtitle,")"):"")]}):(null==m?void 0:m.parentTag)?(0,i.jsxs)("div",{children:["Summary: ","".concat(m.tabTitle).concat(m.tabSubtitle?" (".concat(m.tabSubtitle,")"):"")]}):(0,i.jsx)("div",{children:"(Deleted summary)"}),g=(0,i.jsx)(w.A,{contentType:"comment",children:(0,i.jsx)(F.A,{trim:!0,collectionName:"MultiDocuments",fieldName:"contents",documentId:c,versionBefore:null,versionAfter:a.version,revisionAfter:a})});return(0,i.jsxs)(N.A,{icon:(0,i.jsx)(R.A,{className:r.feedIcon,icon:"Edit"}),frame:!0,expands:!0,expanded:l||!o,setExpanded:d,tooltip:o&&!l&&g,children:[o&&!l&&(0,i.jsx)(T.A,{tag:n,itemDescription:f,url:"",revision:a}),!(o&&!l)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(T.A,{tag:n,itemDescription:f,url:"",revision:a})}),g]})]})});var _=n(27360),M=n(6421),E=n(96973),B=n(79708),O=n(28203),P=n(66121),U=n(37715);let H=(0,u.Il)("LinkToPost",e=>({linkColor:{color:e.palette.primary.main}})),W=(0,o.N)("LinkToPost",e=>{let{post:t}=e,n=(0,u.IS)(H),s=(0,u.IS)(B.$);if(!t)return(0,i.jsx)("span",{children:"[Deleted]"});let o=null==t?void 0:t.isRead;return(0,i.jsx)(U.A,{post:t,placement:"bottom-start",clickable:!0,children:(0,i.jsx)(P.Link,{className:v()(s.link,n.linkColor,o&&"visited"),to:(0,O.lz)(t),children:t.title})})});var q=n(90252),J=n(10203),z=n(88337);let Y=(0,u.Il)("TagHistoryPage",e=>({title:{fontFamily:e.isFriendlyUI?e.palette.fonts.sansSerifStack:void 0},feed:{...e.typography.body2},settings:{background:e.palette.panelBackground.default,padding:16,marginBottom:32,...e.typography.body2},dropdownSetting:{marginBottom:8},checkboxSetting:{marginBottom:8},checkbox:{padding:0,marginRight:4},label:{verticalAlign:"center"},feedIcon:{opacity:.5,width:16,height:16},commentIcon:{marginTop:6}})),V=e=>{let{expanded:t,settings:n,setSettings:s,lenses:o}=e,a=(0,u.IS)(Y);return t?(0,i.jsxs)("div",{className:a.settings,children:[(0,i.jsxs)("div",{className:a.dropdownSetting,children:["Format",(0,i.jsxs)(g.A,{value:n.displayFormat,onChange:e=>{s({...n,displayFormat:e.target.value})},children:[(0,i.jsx)(J.Dr,{value:"expanded",children:"Expanded"}),(0,i.jsx)(J.Dr,{value:"dense",children:"Dense"})]})]}),(0,i.jsxs)("div",{className:a.checkboxSetting,children:[(0,i.jsx)(f.A,{className:a.checkbox,checked:n.showEdits,onChange:e=>s({...n,showEdits:e.target.checked})}),(0,i.jsx)("span",{className:a.label,children:"Show edits to contents"})]}),(0,i.jsxs)("div",{className:a.checkboxSetting,children:[(0,i.jsx)(f.A,{className:a.checkbox,checked:n.showSummaryEdits,onChange:e=>s({...n,showSummaryEdits:e.target.checked})}),(0,i.jsx)("span",{className:a.label,children:"Show edits to summaries"})]}),(0,i.jsxs)("div",{className:a.checkboxSetting,children:[(0,i.jsx)(f.A,{className:a.checkbox,checked:n.showTagging,onChange:e=>s({...n,showTagging:e.target.checked})}),(0,i.jsx)("span",{className:a.label,children:"Show tagging"})]}),(0,i.jsxs)("div",{className:a.checkboxSetting,children:[(0,i.jsx)(f.A,{className:a.checkbox,checked:n.showComments,onChange:e=>s({...n,showComments:e.target.checked})}),(0,i.jsx)("span",{className:a.label,children:"Show comments"})]}),(0,i.jsxs)("div",{className:a.checkboxSetting,children:[(0,i.jsx)(f.A,{className:a.checkbox,checked:n.showMetadata,onChange:e=>s({...n,showMetadata:e.target.checked})}),(0,i.jsx)("span",{className:a.label,children:"Show changes to metadata"})]}),(0,h.hH)()&&o.length>1&&(0,i.jsxs)("div",{children:["Lens",(0,i.jsxs)(g.A,{value:n.lensId,onChange:e=>{s({...n,lensId:e.target.value})},children:[(0,i.jsx)(J.Dr,{value:"all",children:"All lenses"}),o.map(e=>(0,i.jsx)(J.Dr,{value:e._id,children:"".concat(e.tabTitle).concat(e.tabSubtitle?": ".concat(e.tabSubtitle):"").concat(e.deleted?" [Deleted]":"")},e._id))]})]})]}):null},Q=(0,o.N)("TagHistoryPage",()=>{let e=(0,u.IS)(Y),{params:t,query:n}=(0,r.zy)(),{slug:o}=t,d=n.user,{tag:f,loading:g,error:h}=(0,a.o)(o,"TagHistoryFragment"),x=(0,s.useMemo)(()=>(0,l.m)(f,null==f?void 0:f.lensesIncludingDeleted),[f]),F=c()(x,e=>e._id),[w,T]=(0,s.useState)(p.ru),[D,B]=(0,s.useState)(!1),O="dense"===w.displayFormat||!!d;if(!f)if(g)return(0,i.jsx)($.A,{children:(0,i.jsx)(E.default,{})});else if(h)return(0,i.jsx)(y.A,{error:h});else return(0,i.jsx)(j.default,{});return(0,i.jsx)($.A,{children:(0,i.jsxs)(b.A,{ssr:!1,children:[(0,i.jsx)(q.Ay,{title:f.name,href:(0,p.Yq)(f),children:(0,i.jsx)("div",{onClick:e=>B(e=>!e),children:(0,i.jsx)(S.A,{label:"Settings"})})}),(0,i.jsx)(V,{expanded:D,settings:w,setSettings:T,lenses:x}),(0,i.jsx)("div",{className:e.feed,children:(0,i.jsx)(m.ib,{children:(0,i.jsx)(A.A,{query:z.xF,pageSize:25,variables:{tagId:f._id,options:w},renderers:{tagCreated:{render:t=>(0,i.jsxs)(N.A,{icon:(0,i.jsx)(R.A,{className:e.feedIcon,icon:"Star"}),children:["Created by ",(0,i.jsx)(I.A,{user:t.user})," at ",(0,i.jsx)(_.A,{date:t.createdAt})]})},tagRevision:{render:e=>{var t;return w.showEdits?(0,i.jsx)("div",{children:(0,i.jsx)(k.A,{tag:f,collapsed:O&&d!==(null==(t=e.user)?void 0:t.slug),revision:e,headingStyle:"abridged",documentId:f._id,showDiscussionLink:!1,showIcon:!0})}):null}},lensRevision:{render:e=>{var t;if(!w.showEdits||!e.documentId)return null;let n=F[e.documentId];return(0,i.jsx)("div",{children:(0,i.jsx)(C.A,{tag:f,collapsed:O&&d!==(null==(t=e.user)?void 0:t.slug),lens:n,revision:e,showIcon:!0})})}},summaryRevision:{render:e=>{var t;return w.showEdits?(0,i.jsx)("div",{children:(0,i.jsx)(L,{tag:f,collapsed:O&&d!==(null==(t=e.user)?void 0:t.slug),revision:e})}):null}},tagApplied:{render:t=>w.showTagging&&t.post?(0,i.jsxs)(N.A,{icon:(0,i.jsx)(R.A,{className:e.feedIcon,icon:"Tag"}),children:["Applied to ",(0,i.jsx)(W,{post:t.post}),t.user&&(0,i.jsxs)(i.Fragment,{children:[" by ",(0,i.jsx)(I.A,{user:t.user})]})," ",(0,i.jsx)(_.A,{date:t.createdAt})," ago"]}):null},tagDiscussionComment:{render:t=>w.showComments?(0,i.jsx)("div",{children:(0,i.jsx)(N.A,{icon:(0,i.jsx)(R.A,{className:v()(e.feedIcon,e.commentIcon),icon:"Comment"}),children:(0,i.jsx)(M.A,{treeOptions:{tag:f,forceSingleLine:O},comment:t,loadChildrenSeparately:!0})})}):null},wikiMetadataChanged:{render:t=>{var n;return(0,i.jsx)(N.A,{icon:(0,i.jsx)(R.A,{className:v()(e.feedIcon),icon:"InfoCircle"}),children:(0,i.jsxs)("div",{children:[(0,i.jsx)(I.A,{documentId:null!=(n=t.userId)?n:void 0})," changed ",t.fieldName," from ",""+t.oldValue," to ",""+t.newValue]})})}},lensOrSummaryMetadataChanged:{render:t=>{var n;return(0,i.jsx)(N.A,{icon:(0,i.jsx)(R.A,{className:v()(e.feedIcon),icon:"InfoCircle"}),children:(0,i.jsxs)("div",{children:[(0,i.jsx)(I.A,{documentId:null!=(n=t.userId)?n:void 0})," changed ",t.fieldName," from ",""+t.oldValue," to ",""+t.newValue]})})}}}})})})]})})})},19380:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(95155);n(12115);var s=n(88262),o=n(93664),a=n(7166);let r=(0,s.N)("ErrorPage",e=>{var t,n;let{error:s}=e,r=null!=(n=null!=(t=null==s?void 0:s.message)?t:s)?n:"Error";return(0,i.jsx)(o.A,{children:(0,i.jsx)(a.A,{message:r})})})},21685:(e,t,n)=>{n.d(t,{A:()=>$});var i=n(95155),s=n(12115),o=n(88262),a=n(11559),r=n(62813),l=n(40329),d=n(17759),c=n(11457),m=n(96237),u=n(66121),f=n(52370),g=n(27360),h=n(79675),p=n(4858),x=n(15365);let v=(0,o.N)("TagRevisionItemFullMetadata",e=>{var t;let{tag:n,revision:s,classes:o}=e,a=(0,r.Yq)(n);return(0,i.jsxs)("div",{className:o.root,children:[(0,i.jsx)("div",{className:o.tagName,children:(0,i.jsx)(u.Link,{to:a,children:n.name})}),(0,i.jsxs)("div",{className:o.metadata,children:[(0,i.jsxs)("span",{className:o.metadataText,children:["Edited by"," ",(0,i.jsx)("span",{className:o.username,children:(0,i.jsx)(h.A,{documentId:null!=(t=s.userId)?t:void 0})})," ",(0,i.jsx)(p.A,{changeMetrics:s.changeMetrics,showCharacters:(0,f.kL)(),className:o.changeMetrics}),!(0,f.kL)()&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(g.A,{tooltip:!1,format:"MMM Do YYYY z",date:s.editedAt})," "]})," "]}),(0,i.jsx)(x.A,{document:s,collectionName:"Revisions"})," ",s.commitMessage]})]})},{styles:e=>({root:{marginBottom:e.isFriendlyUI?12:void 0},tagName:e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack,fontSize:16,fontWeight:600,marginBottom:10}:{...e.typography.display2,...e.typography.postStyle,marginTop:0,marginBottom:8,display:"block",fontSize:"1.75rem"},metadata:e.isFriendlyUI?{fontFamily:e.palette.fonts.sansSerifStack,fontSize:14,fontWeight:500,color:e.palette.grey[600],marginRight:e.spacing.unit}:{color:e.palette.grey[800],marginRight:e.spacing.unit,fontSize:"1.1rem",...e.typography.commentStyle},metadataText:{fontStyle:e.isFriendlyUI?"italic":void 0},username:{...e.typography.commentStyle,color:e.palette.text.normal},changeMetrics:{marginRight:e.isFriendlyUI?8:void 0}})});var b=n(86762),y=n(9140),j=n(79850),S=n(72561);let I=(0,l.Il)("TagRevisionItem",e=>({container:{},discussionButtonPositioning:{display:"flex",marginTop:16,marginRight:8}})),$=(0,o.N)("TagRevisionItem",e=>{let{tag:t,collapsed:n=!1,headingStyle:o,revision:a,previousRevision:u,documentId:f,showDiscussionLink:g=!0,noContainer:h=!1,showIcon:p=!1}=e,x=(0,l.IS)(I),$=(0,l.IS)(d.X),[A,k]=(0,s.useState)(!1);if(!f||!a)return null;let{added:C,removed:N}=a.changeMetrics,F=(0,r.wh)(t,a.version),w=!!(C||N||!u)&&(0,i.jsx)(j.A,{contentType:"comment",children:(0,i.jsx)(m.A,{trim:!0,collectionName:"Tags",fieldName:"description",documentId:f,versionBefore:(null==u?void 0:u.version)||null,versionAfter:a.version,revisionAfter:a})}),R=n&&!A?(0,i.jsx)(b.A,{tag:t,revision:a,url:F}):(0,i.jsxs)(i.Fragment,{children:["full"===o&&(0,i.jsx)(v,{tag:t,revision:a}),"abridged"===o&&(0,i.jsx)("div",{children:(0,i.jsx)(b.A,{tag:t,revision:a,url:F})}),w,g&&(0,i.jsx)("div",{className:x.discussionButtonPositioning,children:(0,i.jsx)(y.A,{tag:t,text:"Discuss this ".concat(t.wikiOnly?"wiki":"tag")})})]});return h?R:(0,i.jsx)(c.A,{icon:p?(0,i.jsx)(S.A,{className:$.feedIcon,icon:"Edit"}):void 0,frame:!0,expands:!0,expanded:A||!n,setExpanded:k,tooltip:!(A||!n)&&w,children:(0,i.jsx)("div",{className:x.container,children:R})})},{hocs:[a.A]})},43819:(e,t,n)=>{n.d(t,{o:()=>o});var i=n(12115);let s=e=>Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[n,parseInt(t)]}));function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"interleave-new",o=(0,i.useRef)({});return o.current=(0,i.useMemo)(()=>(function(e,t,n,i){let o=e.map(t);if("no-reorder"===n||0===Object.keys(i).length)return s(o);if("append-new"===n||"prepend-new"===n){let e=o.filter(e=>void 0===i[e]);return s([..."prepend-new"===n?e:[],...Object.keys(i).sort((e,t)=>i[e]-i[t]),..."append-new"===n?e:[]])}if("interleave-new"===n){let e=o.filter(e=>e in i).sort((e,t)=>i[e]-i[t]).reverse();return s(o.map(t=>t in i?e.pop():t))}return s(o)})(e,t,n,o.current),[e,t,n]),e.slice().sort((e,n)=>o.current[t(e)]-o.current[t(n)])}},60442:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(95155),s=n(12115),o=n(65180),a=n(74727),r=n(43819),l=n(96973);let d=e=>{let{query:t,variables:n,renderers:d,firstPageSize:m=20,pageSize:u=20,refetchRef:f,reorderOnRefetch:g=!1,hideLoading:h,disableLoadMore:p,className:x,loadMoreDistanceProp:v=500,fetchPolicy:b="cache-and-network",onLoadingStateChange:y}=e,j=(0,s.useRef)(null),S=(0,s.useRef)(!1),{data:I,error:$,fetchMore:A,refetch:k,loading:C}=(0,o.IT)(t,{variables:{...n,cutoff:null,offset:0,limit:m},fetchPolicy:b,nextFetchPolicy:"cache-first",ssr:!0});f&&k&&(f.current=k);let N=I?Object.keys(I).filter(e=>"__typename"!==e)[0]:null,F=I&&N&&I[N]&&!I[N].cutoff,w=e=>{var t;return"".concat(e.type,"_").concat(null==(t=e[e.type])?void 0:t._id)},R=()=>{a.oc&&(null==j?void 0:j.current)&&function(e,t){return!!e&&e.getBoundingClientRect().y-t<=window.innerHeight}(null==j?void 0:j.current,v)&&!F&&I&&N&&!S.current&&(S.current=!0,A({variables:{...n,cutoff:I[N].cutoff,offset:I[N].endOffset,limit:u},updateQuery:(e,t)=>{var n,i;let{fetchMoreResult:s}=t;if(S.current=!1,!s||!N)return e;let o=new Set(null==(n=e[N].results)?void 0:n.map(w)),a=s[N].results,r=a.filter(e=>!o.has(w(e))),l=a.length>0&&0===r.length?null:s[N].cutoff;return{[N]:{__typename:s[N].__typename,cutoff:l,endOffset:s[N].endOffset,results:[...null!=(i=e[N].results)?i:[],...r]}}}}))};(0,s.useEffect)(R),(e=>{s.useEffect(()=>{if(a.oc)return document.addEventListener("scroll",e),function(){document.removeEventListener("scroll",e)}},[e])})(R);let T=(0,s.useMemo)(()=>{var e;return I&&N&&(null==(e=I[N])?void 0:e.results)||[]},[I,N]),D=(0,r.o)(T,w,g?"no-reorder":void 0);return(0,s.useEffect)(()=>{y&&y(T,C)},[T,C,y]),(0,i.jsxs)("div",{className:x,children:[D.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsx)(c,{renderers:d,item:e,index:t})},w(e))),!p&&(0,i.jsx)("div",{ref:j}),$&&(0,i.jsx)("div",{children:$.toString()}),!h&&!F&&(0,i.jsx)(l.default,{})]})},c=s.memo(e=>{var t;let{renderers:n,item:i,index:s}=e,o=null==(t=n[i.type])?void 0:t.render;return o?o(i[i.type],s):i[i.type]})},74461:(e,t,n)=>{n.d(t,{m:()=>c,y:()=>m});var i=n(12115),s=n(5501),o=n(20463),a=n.n(o),r=n(78411),l=n.n(r),d=n(71513);function c(e,t){var n;return e&&t?[{_id:d.m,collectionName:"Tags",fieldName:"description",index:0,contents:e.description,tableOfContents:e.tableOfContents,contributors:"contributors"in e?e.contributors:null,parentDocumentId:e._id,title:e.name,preview:null,tabTitle:"Main",tabSubtitle:null,slug:"main",oldSlugs:[],userId:null!=(n=e.userId)?n:"",deleted:e.deleted,createdAt:e.createdAt,legacyData:{},originalLensDocument:null,arbitalLinkedPages:"arbitalLinkedPages"in e?e.arbitalLinkedPages:null,textLastUpdatedAt:e.textLastUpdatedAt?new Date(e.textLastUpdatedAt):null,baseScore:e.baseScore,extendedScore:e.extendedScore,score:e.score,afBaseScore:e.afBaseScore,afExtendedScore:e.afExtendedScore,voteCount:e.voteCount,currentUserVote:e.currentUserVote,currentUserExtendedVote:e.currentUserExtendedVote},...t.map(t=>{var n;return{...t,index:t.index+1,title:null!=(n=t.title)?n:e.name,contributors:"contributors"in t?t.contributors:null,arbitalLinkedPages:"arbitalLinkedPages"in t?t.arbitalLinkedPages:null,originalLensDocument:t,textLastUpdatedAt:t.textLastUpdatedAt?new Date(t.textLastUpdatedAt):null}})]:[]}function m(e){var t,n;let{query:o,location:r}=(0,s.zy)(),m=null!=(t=o.lens)?t:o.l,u=(0,s.Zp)(),f=(0,i.useMemo)(()=>c(e,null==e?void 0:e.lenses),[e]),g=(0,i.useMemo)(()=>f.find(e=>{var t;return e.slug===m||e.oldSlugs.includes(m)||(null==(t=e.legacyData)?void 0:t.arbitalPageId)===m}),[f,m]),h=null!=(n=null==g?void 0:g._id)?n:d.m,p=(0,i.useMemo)(()=>f.find(e=>e._id===h),[h,f]),x=(0,i.useCallback)(e=>{var t;let n=null==(t=f.find(t=>t._id===e))?void 0:t.slug;if(!n)return r;let i=f.find(e=>e._id===d.m),s=n===(null==i?void 0:i.slug),c=l()(o,["l","lens","version"]),m=s?a().stringify(c):a().stringify({lens:n,...c});return{pathname:r.pathname,search:m,hash:r.hash}},[f,r,o]),v=(0,i.useCallback)(e=>{u(x(e))},[x,u]),b=(0,i.useCallback)(e=>{let t=x(e),n=t.search?"?".concat(t.search):"";return"".concat(t.pathname).concat(n).concat(t.hash)},[x]);return(0,i.useEffect)(()=>{m&&e&&!g&&u({...r,search:a().stringify(l()(o,["l","lens"]))},{replace:!0})},[o,f,u,r,g,e,m]),{selectedLens:p,selectedLensId:h,updateSelectedLens:v,getSelectedLensUrlPath:b,lenses:f}}},86762:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(95155);n(12115);var s=n(88262),o=n(66121),a=n(70097),r=n(44500),l=n(40329),d=n(87118),c=n(44914);let m=(0,l.Il)("ArbitalImportRevisionDetails",e=>({title:{marginTop:0},noticeBlock:{fontStyle:"italic",marginBottom:16},originalMarkdown:{whiteSpace:"pre-line"}})),u=(0,s.N)("ArbitalImportRevisionDetails",e=>{var t;let{onClose:n,revision:s}=e,o=(0,l.IS)(m);return(0,i.jsx)(c.A,{open:!0,onClose:n,children:(0,i.jsxs)(d.C,{children:[(0,i.jsx)("h1",{className:o.title,children:"Imported from Arbital"}),(0,i.jsx)("div",{className:o.noticeBlock,children:"This revision was imported from Arbital, where it was originally written in Markdown, shown below."}),(0,i.jsx)("div",{className:o.originalMarkdown,children:null==(t=s.legacyData)?void 0:t.arbitalMarkdown})]})})});var f=n(27360),g=n(23211),h=n(94258),p=n(63591),x=n(4858),v=n(15365),b=n(72561);let y=(0,s.N)("TagRevisionItemShortMetadata",e=>{var t;let{tag:n,url:s,itemDescription:l,revision:d,classes:c}=e,{openDialog:m}=(0,a.sp)();return(0,i.jsxs)(i.Fragment,{children:[l,(0,i.jsx)("span",{className:c.username,children:(0,i.jsx)(g.A,{user:d.user})})," ",(0,i.jsx)(o.Link,{to:s,children:(0,i.jsx)(p.default,{title:"View Selected Revision",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.A,{children:["v",d.version]}),(0,i.jsxs)(h.A,{children:[(0,i.jsx)(f.A,{tooltip:!1,format:"MMM Do YYYY z",date:d.editedAt})," "]})]})})})," ",d.skipAttributions&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.default,{title:"Excluded from author-attribution.",children:(0,i.jsx)("span",{className:c.skippedIcon,children:(0,i.jsx)(b.A,{icon:"Clear"})})})}),(null==(t=d.legacyData)?void 0:t.arbitalPageId)&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.default,{title:"Imported from Arbital. Click to view original Markdown.",children:(0,i.jsx)("span",{onClick:function(){m({name:"ArbitalImportRevisionDetails",contents:e=>{let{onClose:t}=e;return(0,i.jsx)(u,{onClose:t,revision:d})}})},children:(0,i.jsx)(r.n,{className:c.arbitalLogo,strokeWidth:.7})})})}),(0,i.jsx)(h.A,{children:(0,i.jsxs)(o.Link,{to:s,children:[(0,i.jsx)(x.A,{changeMetrics:d.changeMetrics})," ",d.commitMessage]})})," ",(0,i.jsx)(h.A,{children:(0,i.jsx)(v.A,{document:d,collectionName:"Revisions"})})]})},{styles:e=>({username:{...e.typography.commentStyle,fontWeight:600,fontSize:"1.16rem",color:e.palette.text.normal,marginRight:12},arbitalLogo:{fill:e.palette.grey[600],cursor:"pointer",width:12,height:12,marginRight:16,verticalAlign:"baseline"},skippedIcon:{cursor:"pointer","--icon-size":"20px",verticalAlign:"middle",marginRight:16}})})},88337:(e,t,n)=>{n.d(t,{B9:()=>u,KR:()=>a,Ts:()=>m,gj:()=>s,in:()=>c,xF:()=>o});var i=n(97885);let s=(0,i.J)("\n  query AllTagsActivityFeed($limit: Int, $cutoff: Date, $offset: Int) {\n    AllTagsActivityFeed(limit: $limit, cutoff: $cutoff, offset: $offset) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagCreated {\n          ...TagCreationHistoryFragment\n        }\n        tagRevision {\n          ...RevisionTagFragment\n        }\n        tagDiscussionComment {\n          ...CommentsListWithParentMetadata\n        }\n      }\n    }\n  }\n"),o=(0,i.J)("\n  query TagHistoryFeed($limit: Int, $cutoff: Date, $offset: Int, $tagId: String!, $options: JSON) {\n    TagHistoryFeed(limit: $limit, cutoff: $cutoff, offset: $offset, tagId: $tagId, options: $options) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagCreated {\n          ...TagHistoryFragment\n        }\n        tagRevision {\n          ...RevisionHistoryEntry\n        }\n        lensRevision {\n          ...RevisionHistoryEntry\n        }\n        summaryRevision {\n          ...RevisionHistorySummaryEdit\n        }\n        tagApplied {\n          ...TagRelHistoryFragment\n        }\n        tagDiscussionComment {\n          ...CommentsList\n        }\n        wikiMetadataChanged {\n          ...FieldChangeFragment\n        }\n        lensOrSummaryMetadataChanged {\n          ...FieldChangeFragment\n        }\n      }\n    }\n  }\n"),a=(0,i.J)("\n  query RecentDiscussionFeed($limit: Int, $cutoff: Date, $offset: Int, $af: Boolean, $commentsLimit: Int, $maxAgeHours: Int, $tagCommentsLimit: Int) {\n    RecentDiscussionFeed(limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        postCommented {\n          ...PostsRecentDiscussion\n        }\n        shortformCommented {\n          ...ShortformRecentDiscussion\n        }\n        tagDiscussed {\n          ...TagRecentDiscussion\n        }\n        tagRevised {\n          ...RecentDiscussionRevisionTagFragment\n        }\n      }\n    }\n  }\n");(0,i.J)("\n  query SubscribedFeed($limit: Int, $cutoff: Date, $offset: Int, $af: Boolean) {\n    SubscribedFeed(limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        postCommented {\n          ...SubscribedPostAndCommentsFeed\n        }\n      }\n    }\n  }\n");let r=(0,i.J)("\n  query SubforumMagicFeed($tagId: String!, $limit: Int, $cutoff: Float, $offset: Int, $af: Boolean, $commentsLimit: Int, $maxAgeHours: Int) {\n    SubforumMagicFeed(tagId: $tagId, limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagSubforumPosts {\n          ...PostsRecentDiscussion\n        }\n        tagSubforumComments {\n          ...CommentWithRepliesFragment\n        }\n        tagSubforumStickyComments {\n          ...StickySubforumCommentFragment\n        }\n      }\n    }\n  }\n"),l=(0,i.J)("\n  query SubforumNewFeed($tagId: String!, $limit: Int, $cutoff: Date, $offset: Int, $af: Boolean, $commentsLimit: Int, $maxAgeHours: Int) {\n    SubforumNewFeed(tagId: $tagId, limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagSubforumPosts {\n          ...PostsRecentDiscussion\n        }\n        tagSubforumComments {\n          ...CommentWithRepliesFragment\n        }\n        tagSubforumStickyComments {\n          ...StickySubforumCommentFragment\n        }\n      }\n    }\n  }\n"),d=(0,i.J)("\n  query SubforumOldFeed($tagId: String!, $limit: Int, $cutoff: Date, $offset: Int, $af: Boolean, $commentsLimit: Int, $maxAgeHours: Int) {\n    SubforumOldFeed(tagId: $tagId, limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagSubforumPosts {\n          ...PostsRecentDiscussion\n        }\n        tagSubforumComments {\n          ...CommentWithRepliesFragment\n        }\n        tagSubforumStickyComments {\n          ...StickySubforumCommentFragment\n        }\n      }\n    }\n  }\n"),c={SubforumMagicFeed:r,SubforumNewFeed:l,SubforumOldFeed:d,SubforumRecentCommentsFeed:(0,i.J)("\n  query SubforumRecentCommentsFeed($tagId: String!, $limit: Int, $cutoff: Date, $offset: Int, $af: Boolean, $commentsLimit: Int, $maxAgeHours: Int) {\n    SubforumRecentCommentsFeed(tagId: $tagId, limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagSubforumPosts {\n          ...PostsRecentDiscussion\n        }\n        tagSubforumComments {\n          ...CommentWithRepliesFragment\n        }\n        tagSubforumStickyComments {\n          ...StickySubforumCommentFragment\n        }\n      }\n    }\n  }\n"),SubforumTopFeed:(0,i.J)("\n  query SubforumTopFeed($tagId: String!, $limit: Int, $cutoff: Int, $offset: Int, $af: Boolean, $commentsLimit: Int, $maxAgeHours: Int) {\n    SubforumTopFeed(tagId: $tagId, limit: $limit, cutoff: $cutoff, offset: $offset, af: $af) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        tagSubforumPosts {\n          ...PostsRecentDiscussion\n        }\n        tagSubforumComments {\n          ...CommentWithRepliesFragment\n        }\n        tagSubforumStickyComments {\n          ...StickySubforumCommentFragment\n        }\n      }\n    }\n  }\n")},m=(0,i.J)("\n  query UltraFeed($limit: Int, $cutoff: Date, $offset: Int, $sessionId: String, $settings: JSON) {\n    UltraFeed(limit: $limit, cutoff: $cutoff, offset: $offset, sessionId: $sessionId, settings: $settings) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        feedCommentThread {\n          ...FeedCommentThreadFragment\n        }\n        feedPost {\n          ...FeedPostFragment\n        }\n        feedSpotlight {\n          ...FeedSpotlightFragment\n        }\n        feedSubscriptionSuggestions {\n          ...FeedSubscriptionSuggestionsFragment\n        }\n      }\n    }\n  }\n"),u=(0,i.J)("\n  query UltraFeedSubscriptions($limit: Int, $cutoff: Date, $offset: Int, $settings: JSON) {\n    UltraFeedSubscriptions(limit: $limit, cutoff: $cutoff, offset: $offset, settings: $settings) {\n      __typename\n      cutoff\n      endOffset\n      results {\n        type\n        feedCommentThread {\n          ...FeedCommentThreadFragment\n        }\n        feedPost {\n          ...FeedPostFragment\n        }\n        feedSubscriptionSuggestions {\n          ...FeedSubscriptionSuggestionsFragment\n        }\n      }\n    }\n  }\n")},96237:(e,t,n)=>{n.d(t,{A:()=>S});var i=n(95155),s=n(12115),o=n(88262),a=n(88381),r=n(65180),l=n(40329),d=n(8370),c=n(48782),m=n(82325),u=n(7166),f=n(96973),g=n(22665),h=n(72561),p=n(10203),x=n(97885);let v=(0,x.J)("\n  mutation updateRevisionCompareRevisions($selector: SelectorInput!, $data: UpdateRevisionDataInput!) {\n    updateRevision(selector: $selector, data: $data) {\n      data {\n        ...RevisionEdit\n      }\n    }\n  }\n"),b=(0,l.Il)("CompareRevisions",e=>({differences:{"& ins":{background:e.palette.background.diffInserted,textDecoration:"none"},"& del":{background:e.palette.background.diffDeleted,textDecoration:"none"}},expand:{cursor:"pointer",color:e.palette.primary.main,marginTop:12},menuButton:{position:"absolute",top:12,right:12,cursor:"pointer"},menuIcon:{"--icon-size":"15.6px",color:e.palette.icon.dim}})),y=e=>{let{revision:t}=e,n=(0,l.IS)(b),[o,a]=(0,s.useState)(null),[r,c]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:n.menuButton,onClick:e=>{a(e.currentTarget),c(!0)},children:(0,i.jsx)(h.A,{className:n.menuIcon,icon:"EllipsisVertical"})}),(0,i.jsx)(d.W,{onClick:()=>{a(null)},open:!!o,anchorEl:o,children:r&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(j,{revision:t})})})]})},j=e=>{let{revision:t}=e,[n]=(0,a.n)(v);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.Dr,{onClick:e=>{n({variables:{selector:{_id:t._id},data:{skipAttributions:!t.skipAttributions}}})},children:t.skipAttributions?"Don't exclude this revision from attributions":"Exclude this revision from attributions"})})},S=(0,o.N)("CompareRevisions",e=>{let{collectionName:t,fieldName:n,documentId:o,versionBefore:a,versionAfter:d,revisionAfter:h,trim:p=!1}=e,v=(0,l.IS)(b),[j,S]=(0,s.useState)(!1),I=(0,m.iZ)(),{data:$,loading:A,error:k}=(0,r.IT)((0,x.J)("\n    query RevisionsDiff($collectionName: String!, $fieldName: String!, $id: String!, $beforeRev: String, $afterRev: String!, $trim: Boolean) {\n      RevisionsDiff(collectionName: $collectionName, fieldName: $fieldName, id: $id, beforeRev: $beforeRev, afterRev: $afterRev, trim: $trim)\n    }\n  "),{variables:{collectionName:t,fieldName:n,id:o,beforeRev:a,afterRev:d,trim:p},ssr:!0}),C=null==$?void 0:$.RevisionsDiff;if(k)return(0,i.jsx)(u.A,{message:k.message});if(A||"string"!=typeof C)return(0,i.jsx)(f.default,{});let N=C.split(" ").length;return(0,i.jsxs)("div",{className:v.differences,children:[(0,i.jsx)(g.A,{maxLengthWords:600,rawWordCount:N,graceWords:20,expanded:j,getTruncatedSuffix:e=>{let{wordsLeft:t}=e;return(0,i.jsxs)("div",{className:v.expand,onClick:()=>S(!0),children:[t&&(0,i.jsxs)(i.Fragment,{children:["Read More (",t," more words)"]}),!t&&(0,i.jsx)(i.Fragment,{children:"Read More"})]})},dangerouslySetInnerHTML:{__html:C},description:"tag ".concat(o)}),(0,c.iq)(I)&&(0,i.jsx)(y,{revision:h})]})})}}]);
//# sourceMappingURL=7759-a557a7629531c6b7.js.map